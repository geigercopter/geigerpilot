<!DOCTYPE html>
<!-- saved from url=(0053)https://code.google.com/p/arducopter/wiki/AC2_OptFlow -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
 
 <meta name="ROBOTS" content="NOARCHIVE">
 
 <link rel="icon" type="image/vnd.microsoft.icon" href="https://ssl.gstatic.com/codesite/ph/images/phosting.ico">
 
 
 <link rel="canonical" href="http://code.google.com/p/arducopter/wiki/AC2_OptFlow">
 
 <script src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/plusone.js" gapi_processed="true"></script><script type="text/javascript">
 
 
 
 
 var codesite_token = null;
 
 
 var CS_env = {"loggedInUserEmail":null,"projectName":"arducopter","profileUrl":null,"projectHomeUrl":"/p/arducopter","assetVersionPath":"https://ssl.gstatic.com/codesite/ph/4319235871638307680","relativeBaseUrl":"","assetHostPath":"https://ssl.gstatic.com/codesite/ph","domainName":null,"token":null};
 var _gaq = _gaq || [];
 _gaq.push(
 ['siteTracker._setAccount', 'UA-18071-1'],
 ['siteTracker._trackPageview']);
 
 _gaq.push(
 ['projectTracker._setAccount', 'UA-8450907-4'],
 ['projectTracker._trackPageview']);
 
 (function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
 })();
 
 </script><script type="text/javascript" async="" src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/ga.js"></script>
 
 
 <title>AC2_OptFlow - 
 arducopter -
 
 
 Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting
 </title>
 <link type="text/css" rel="stylesheet" href="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/core.css">
 
 <link type="text/css" rel="stylesheet" href="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/ph_detail.css">
 
 
 
 <link type="application/atom+xml" rel="alternate" href="https://code.google.com/feeds/p/arducopter/gitchanges/basic?path=/AC2_OptFlow.wiki&repo=wiki">
 
 
<!--[if IE]>
 <link type="text/css" rel="stylesheet" href="https://ssl.gstatic.com/codesite/ph/4319235871638307680/css/d_ie.css" >
<![endif]-->
 <style type="text/css">
 .menuIcon.off { background: no-repeat url(https://ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -42px }
 .menuIcon.on { background: no-repeat url(https://ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 -28px }
 .menuIcon.down { background: no-repeat url(https://ssl.gstatic.com/codesite/ph/images/dropdown_sprite.gif) 0 0; }
 
 
 #maincol {
 padding-top: 0;
 padding-bottom: 0;
 }

 
 </style>
<style type="text/css"></style></head>
<body class="t6" style="zoom: 1;">
<script type="text/javascript">
 window.___gcfg = {lang: 'en'};
 (function() 
 {var po = document.createElement("script");
 po.type = "text/javascript"; po.async = true;po.src = "https://apis.google.com/js/plusone.js";
 var s = document.getElementsByTagName("script")[0];
 s.parentNode.insertBefore(po, s);
 })();
</script>
<div class="headbg">

 <div id="gaia">
 

 <span>
 
 
 <a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#" id="projects-dropdown" onclick="return false;"><u>My favorites</u> <small>▼</small></a>
 | <a href="https://www.google.com/accounts/ServiceLogin?service=code&ltmpl=phosting&continue=https%3A%2F%2Fcode.google.com%2Fp%2Farducopter%2Fwiki%2FAC2_OptFlow&followup=https%3A%2F%2Fcode.google.com%2Fp%2Farducopter%2Fwiki%2FAC2_OptFlow" onclick="_CS_click(&#39;/gb/ph/signin&#39;);"><u>Sign in</u></a>
 
 </span>

 </div>

 <div class="gbh" style="left: 0pt;"></div>
 <div class="gbh" style="right: 0pt;"></div>
 
 
 <div style="height: 1px"></div>
<!--[if lte IE 7]>
<div style="text-align:center;">
Your version of Internet Explorer is not supported. Try a browser that
contributes to open source, such as <a href="http://www.firefox.com">Firefox</a>,
<a href="http://www.google.com/chrome">Google Chrome</a>, or
<a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>.
</div>
<![endif]-->



 <table style="padding:0px; margin: 0px 0px 10px 0px; width:100%" cellpadding="0" cellspacing="0" itemscope="" itemtype="http://schema.org/CreativeWork">
 <tbody><tr style="height: 58px;">
 
 
 
 <td id="plogo">
 <link itemprop="url" href="https://code.google.com/p/arducopter">
 <a href="https://code.google.com/p/arducopter/">
 
 
 <img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/logo" alt="Logo" itemprop="image">
 
 </a>
 </td>
 
 <td style="padding-left: 0.5em">
 
 <div id="pname">
 <a href="https://code.google.com/p/arducopter/"><span itemprop="name">arducopter</span></a>
 </div>
 
 <div id="psum">
 <a id="project_summary_link" href="https://code.google.com/p/arducopter/"><span itemprop="description">Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis</span></a>
 
 </div>
 
 
 </td>
 <td style="white-space:nowrap;text-align:right; vertical-align:bottom;">
 
 <form action="https://code.google.com/hosting/search">
 <input size="30" name="q" value="" type="text">
 
 <input type="submit" name="projectsearch" value="Search projects">
 </form>
 
 </td></tr>
 </tbody></table>

</div>

 
<div id="mt" class="gtb"> 
 <a href="https://code.google.com/p/arducopter/" class="tab ">Project&nbsp;Home</a>
 
 
 
 
 <a href="https://code.google.com/p/arducopter/downloads/list" class="tab ">Downloads</a>
 
 
 
 
 
 <a href="https://code.google.com/p/arducopter/wiki/ArduCopter?tm=6" class="tab active">Wiki</a>
 
 
 
 
 
 <a href="https://code.google.com/p/arducopter/issues/list" class="tab ">Issues</a>
 
 
 
 
 
 <a href="https://code.google.com/p/arducopter/source/checkout" class="tab ">Source</a>
 
 
 
 
 
 
 
 
 <div class="gtbc"></div>
</div>
<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" class="st">
 <tbody><tr>
 
 
 
 <td class="subt">
 <div class="issueDetail">
<div class="isf">
 
 <span class="inIssueList"> 
 <span>Search</span>
 <form action="https://code.google.com/p/arducopter/w/list" method="GET" style="display:inline">
 <select id="can" name="can">
 <option disabled="disabled">Search within:</option>
 
 <option value="1">&nbsp;All wiki pages</option>
 <option value="3">&nbsp;Featured pages</option>
 <option value="2" selected="selected">&nbsp;Current pages</option>
 
 
 <option value="4">&nbsp;Deprecated pages</option>
 
 </select>
 <span>for</span>
 <span id="qq"><input type="text" size="38" id="searchq" name="q" value="" autocomplete="off"></span>
 
 
 
 <input type="submit" value="Search">
 </form>
 </span>

 
 
 
 
 
 
 

</div>
</div>

 </td>
 
 
 
 
 
 
 <td align="right" valign="top" class="bevel-right"></td>
 </tr>
</tbody></table>


<script type="text/javascript">
 var cancelBubble = false;
 function _go(url) { document.location = url; }
</script>
<div id="maincol" style="padding:0 3px 3px 0; margin:0">

 






 
<style type="text/css">
 #wikimaincol { padding-top: 6px; padding-left:1em}
 #sidebarcontainer {
 padding: 1.5em 2px 2px 2px;
 min-width: 15em;
 max-width: 20em;
 overflow:hidden;
}
 .sidebartop ul { margin:0 0 0 .5em; padding-left:0 !important; list-style:none}
 .sidebartop ul ul { margin-left:1em; padding-left:0; list-style:none; display:none}
 .sidebartop li { margin:0 0 2px 0; padding:1px; padding-left:14px; cursor:pointer}
 .sidebartop li a { padding:2px}
 .sidebartop li { background: url(https://ssl.gstatic.com/codesite/ph/images/plus.gif) no-repeat 1px 3px}
 .sidebartop li.treeopen { background: url(https://ssl.gstatic.com/codesite/ph/images/minus.gif) no-repeat 1px 3px}
 .sidebartop li.treeleaf { background:none}
 .currentpagelink { 
 font-weight: bold;
 text-decoration: none;
 color: black !important; 
 background: #c3d9ff;
 }
 .sidebartop ul.treeleafcontainer { display:block;}
 .sidebarcontent { 
 vertical-align:top;
 padding-right: 3px;
 border-right: 2px solid #ccc;
 }
</style>



 <style type="text/css">
 .delcom { background: #e8e8e8 }
 .commentcontent {
 margin: 2em;
 padding: 0px 10px;
 width: 66em;
 }
 .artifactcomment {
 border-top: 3px solid #c3d9ff;
 }
 #commentform {
 border-top: 3px solid #c3d9ff;
 }
 </style>

<div id="wikipage">
<table>
 <tbody><tr>
 
 
 <td class="sidebarcontent">
 <div class="vt expand" id="wikisidebar">
 <div>
 
 <div style="float:right;">
 <a class="ifExpand" style="font-size:130%; color:blue; text-decoration:none" href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#" onclick="_DW_toggleSidebar(this); return false;" title="Hide sidebar"><b>‹‹</b></a>
 </div>
 <div class="ifCollapse" style="padding:0 2px">
 <a style="font-size:130%; color:blue; text-decoration:none" href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#" onclick="_DW_toggleSidebar(this); return false;" title="Show sidebar"><b>››</b></a>
 </div>
 
 
 <div id="sidebarcontainer" class="sidebartop ifExpand">
 <p><strong>June 2013 UPDATE: The ArduCopter manual has now moved <a href="http://copter.ardupilot.com/" rel="nofollow">here</a>. The manuals here are for legacy hardware and will no longer by updated or maintained.</strong> </p><blockquote><h2><a name="ArduCopter"></a>ArduCopter<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#ArduCopter" class="section_anchor"></a></h2>
</blockquote><ul class="treeleafcontainer"><li class="treeleaf"><hr></li><li class="treeleaf"><strong><a href="https://code.google.com/p/arducopter/wiki/ArduCopterTOC">Table of Contents</a> - - <a href="https://code.google.com/p/arducopter/wiki/ArduCopterTOCsimple">Simple Version</a></strong> </li><li class="treeleaf"><hr></li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ArduCopter">What is ArduCopter?</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Purchase">Get it!</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_news">Project news</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_history">Project history</a> </li><li class="treeleaf"><hr></li><li class="treeleaf"><strong>MultiCopter Instructions</strong> </li><li class="treeopen"><strong><a href="https://code.google.com/p/arducopter/wiki/ArduCopter2">Multicopter (Quad, Tri, Hex, etc)</a></strong> </li><ul class="treeleafcontainer"><li class="treeleaf"><strong><a href="https://code.google.com/p/arducopter/wiki/ArduCopter2Quick">Quick Start Guide</a></strong> </li><li class="treeleaf"><strong><a href="https://code.google.com/p/arducopter/wiki/ArduCopter2SIM">Simulator</a></strong> </li><li><strong>Assembly</strong> </li><ul><li>Preparing your APM or PX4 board and software </li><ul><li>PX4 </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4board">PX4FMU Board Overview</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4IOboard">PX4IO Board Overview</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4FLOWcamera">PX4FLOW Camera Overview</a> </li></ul><li>APM 2.x </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM2board">APM 2.0 Board Overview</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM25board_Overview">APM 2.5 Board Overview</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2Installation">Download and install the Mission Planner and flight software</a> </li></ul><li>APM 1.x </li><ul><li><a href="https://code.google.com/p/arducopter/wiki/AC2Assembly">Assembling your APM board and IMU</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Magnetos">Magnetometer (required if using GPS)</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2Installation2">Download and install the Mission Planner and flight software</a> </li></ul></ul><li>Assembling your MultiCopter frame </li><ul><li><a href="https://code.google.com/p/arducopter/wiki/AC2Airframe">Jdrones QuadCopter</a>  </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2Video">(Video guides)</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2PowerDistro">Soldering the motor connectors and power distribution board</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Motors">Attaching motors to the arms</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Frame_Assembly">Setting up your airframe</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/MountingtheAPM2Board">Mounting the APM 2 Board</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/X_Setup_for_AC_airframe">X_Setup_for_AC_airframe</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC23DR">3DRobotics QuadCopter</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/DJIF330build">DJI F330 FlameWheel</a> </li><li><a href="https://code.google.com/p/arducopter/wiki/VibrationControl">Vibration Control</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/VibrationControlOverView">Vibration Control Concepts</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/GPS">Where to mount your GPS module</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Props">Attaching props to the motors</a> </li></ul><li>Connecting your receiver and motors to the PX4 or APM </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4RC">PX4FMU - Only for QuadCopter</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4FMU_IORC">PX4FMU + PX4IO All Copters</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM2RC">APM2</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Radio">APM1</a> </li></ul><li>HexaCopter, OctaCopter, TriCopter and Camera Gimbal </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM2_Motor_order">APM2</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Multi">APM1</a>  </li></ul></ul><li><strong>Configuration</strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4_First">PX4FMU-Only Initial Setup</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4FMU_PX4IO_First">PX4FMU + PX4IO Initial Setup</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_First">APM Initial Setup</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_ESC">ESC calibration</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Props_2">Setting correct prop/motor direction</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_sensorGUI">Checking the sensors</a> </li></ul><li><strong>Flying</strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Safety">Safety (Important!)</a> </li><li><a href="https://code.google.com/p/arducopter/wiki/AC2_ModeSwitch">Flight Modes</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_AcroMode">Acro</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_StableMode">Stabilize</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_AltHoldMode">Alt Hold</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Simple">Simple</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_AutoMode">Auto</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_RTLMode">RTL</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_GuidedMode">Guided</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_PositionMode">Position</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_LoiterMode">Loiter</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_CircleMode">Circle</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_FollowMe">Follow Me!</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Simple_GeoFence">Simple GeoFence</a> </li></ul><li><a href="https://code.google.com/p/arducopter/wiki/AC2_Flying">First Flights</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_test">Flight test process</a> </li></ul><li><a href="https://code.google.com/p/arducopter/wiki/AC2_GCS">Using a Ground Station</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_MP">Mission Planner GCS</a> </li><li><a href="https://code.google.com/p/arducopter/wiki/AC2_QGC">QGroundControl</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_QGCWaypointWidget">Waypoint Widget</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_QGCParameterWidget">Parameter Widget</a> </li></ul></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Datalogging">Datalogging</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_SimpleMode">CH 7 options (record waypoints with your RC switch, etc)</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_LEDs">LED display meaning</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Failsafe">Failsafe</a> </li></ul><li><strong>Tuning</strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Tweaks">Overview and Methods</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Configfiles">Configuration files for common airframes</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_attitude_PID">Attitude</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_alt_hold_PID">Alt Hold</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_loiter_PID">Loiter and Navigation</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_AutoTrim">AutoTrim &amp; SaveTrim</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Standard_Parameters">Standard Parameters</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Advanced_Parameters">Advanced Parameters</a> </li><li class="treeleaf"><a href="http://code.google.com/p/ardupilot-mega/wiki/MAVParam" rel="nofollow">All user-modifiable MAVLink parameters</a> </li></ul><li><strong>Mission Planning and Analysis</strong> </li><ul><li><a href="https://code.google.com/p/arducopter/wiki/AC2_Mission">Using the Mission Planner</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_MPGCS">Using the Ground Station</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Waypoints">Planning a mission with waypoints and events</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Record">Recording and playing back a mission with tlogs</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Logs">Downloading and analyzing your flight data logs</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Joystick">Flying with a joystick/gamepad instead of RC controller</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Geotagging">Automatically geotagging your photos</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AutoWP">Setting up automatic waypoint grids ("lawnmower pattern")</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Python">Python scripting</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/MPOther">Other features</a> </li></ul></ul><li class="treeopen"><strong>Optional Additions</strong> </li><ul class="treeleafcontainer"><li><a href="https://code.google.com/p/arducopter/wiki/Telem">Using wireless data for telemetry and in-flight commands</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Frequencies">Some tips on picking frequencies</a> </li><li>APM 1 </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM13DRadio">3DR Radio </a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM1Wireless">Xbee</a> </li></ul><li>APM 2 </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/3DRadio">3DR Radio </a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM2Wireless">Xbee</a> </li></ul></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Sonar">Sonar</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/OSD">On-screen Display (OSD) board</a>  </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Current">Voltage and Current measurement</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ExternalMag">Using an external magnetometer</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Camera">Camera gimbal and Shutter control</a> </li><li class="treeleaf"><a href="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting.html" class="currentpagelink">Optical flow sensor</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_frameLEDs">Cool LED strips</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PPMsumRC">Connecting a PPM-Sum receiver</a> </li></ul><li><strong>Simulation</strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/QuadHil">Set up a Quad hardware-in-the-loop simulation with FlightGear</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ArduCopter2SIM">Online Simulator (no hardware required)</a> </li></ul><li class="treeleaf"><strong><a href="https://code.google.com/p/arducopter/wiki/PDF_Guides">Printable PDF Guides</a></strong> </li><li class="treeleaf"><strong><a href="https://code.google.com/p/arducopter/wiki/AC2_Troubleshooting">Troubleshooting guide</a></strong> </li><li class="treeleaf"><strong><a href="https://code.google.com/p/arducopter/wiki/AC2_Pitfalls">Potential Pitfalls</a></strong> </li></ul><li class="treeleaf"><hr></li><li class="treeleaf"><strong>Traditional HeliCopter Instructions</strong> </li><li><strong><a href="https://code.google.com/p/arducopter/wiki/ArduCopter_TradHeli">Traditional HeliCopter</a></strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_Quick">Quick Start Guide</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_PartsList">Parts List</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_Assembly">Assembling the Airframe</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_ConnectingAPM">APM and your RC system</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_Magnetos">(Optional) Magnetometers</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_LoadingPage">Loading the code</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_Configuration">Configuration and Setting PIDs</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeli_Testing">Default PIDs &amp; Testing</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/TradHeliHIL">Simulation</a> </li></ul><li class="treeleaf"><hr></li><li><strong>Appendix</strong> </li><ul><li class="treeleaf"><a href="http://firmware.diydrones.com/" rel="nofollow">APM and PX4 Firmware Upload Site</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC_LED">LED behavior</a>   </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC_FAQ_General">FAQ &amp; general details</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM25AltPower">Alternative ways to power the APM 2.5 board</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/SolderJumpers">Solder jumpers on the bottom of the APM 2.5 board</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Failsafe">Failsafe function</a> </li><li class="treeleaf"><a href="http://code.google.com/p/ardupilot-mega/wiki/Sixmodes" rel="nofollow">How to get six modes from your RC transmitter</a> </li><li><a href="https://code.google.com/p/arducopter/wiki/AC2CLI">Using the Command Line Interface (CLI)</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_CLI">CLI setup</a> </li></ul><li><a href="https://code.google.com/p/arducopter/wiki/Programming">Programming with Arduino</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ProgrammingSettingUp">Setting up APM for programming</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ProgrammingArduino">Programming APM with Arduino</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Code">Downloading and using the ArduCopter software</a> </li><li><a href="https://code.google.com/p/arducopter/wiki/ProgrammingCodeOverview">Code Overview</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ProgrammingCodeAttitude">Attitude Control</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ProgrammingCodeLibraries">Libraries</a> </li></ul></ul><li><strong>PX4 Developers Guide</strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/PX4DevEnv">PX4 Development Environment</a> </li></ul><li><strong>Advanced configuration</strong> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2Advanced">Using the APM_Config.h file</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AC2_Config">Advanced configuration with the APM_Config.h file</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/GPSDisable">Disabling the built-in GPS in APM2 so you can use an external GPS</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Replacement">Laser cutting your own ArduCopter replacement parts</a> </li><li class="treeleaf"><a href="http://code.google.com/p/ardupilot-mega/wiki/APM2Protection" rel="nofollow">Adding power protection to APM 2.0</a> </li><li>Updating the PPM encoder firmware </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/APM2Encoder">APM 2</a> </li><li>APM 1 </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/AVRStudio">Rebuilding/Programming the Encoder using AVRStudio</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/BusPirate">Programming the Encoder using the Bus Pirate</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/Encoder">Standalone PPM Encoder</a> </li></ul><li><a href="https://code.google.com/p/arducopter/wiki/GPSFirmware">Reloading/updating your GPS firmware</a> </li><ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/UBlox">uBlox GPS</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/MediaTek">MediaTek GPS</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/ArduCopter_Members">ArduCopter Core Members</a> </li><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/UserHacks">User Submitted Hacks</a> </li><li class="treeleaf"><a href="http://code.google.com/p/ardupilot-mega/wiki/3DRadio" rel="nofollow">Using a 3DR Radio for telemetry</a> </li></ul><li class="treeleaf"><a href="https://code.google.com/p/arducopter/wiki/GlossaryPage">Glossary</a> </li><li class="treeleaf"><hr></li><li class="treeleaf"><a href="http://code.google.com/p/ardupilot-mega/wiki/DevTeam" rel="nofollow">DIY Drones Dev Team</a> </li></ul><p><!--  * ----
  * Legacy
  * [ArduCopter_Quad ArduCopter 1 Quad]   * [ArduCopter_QuadIntroduction Introduction]   * [Brushless_Motors Brushless motors warning]   * [Quad_Quick_Start Quick Start Guide]   * ----
   * *Setting up the hardware*   * [Quad_GettingStarted Soldering the APM board]   * [PDistro_Revision_C Soldering the Power Distribution]   * [Quad_Frame_Assembly Setting up your airframe]    * [Quad_Arm_Assembly Assembling Motors to Arms]   * [Quad_Radio Connecting your RC]   * [Quad_Magnetos (Optional) Magnetometers]   * [Quad_GPS (Optional) GPS]   * [Quad_Sonar (Optional) Sonar]   * [Quad_LoadingPage Loading the code]   * ----
   * *Configuration*   * [First First-time setup]    * [Quad_ConfiguratorTool Using the Configurator Tool]    * [CLI Using the Command Line Interface (CLI)]   * [Quad_ESC ESC Calibration]   * ----
   * *Flying*   * [Quad_Testing Pre-Flight]   * [NGTest Flight Test process]   * [Quad_Flying Flying]   * [Quad_ModeSwitch Mode Switch]   * [Quad_FlightTips Flight Tuning tips] --> <!--     * ----
     * *With MAVLink*     * [AC2_ConfigRadio Radio setup]     * [AC2_Mag Configuring the magnetometer]     * [AC2_Frame Choosing a frame orientation]     * [AC2_ModeSwitch Setting flight modes]     * ----
 --> </p>
 </div>
 </div>
</div>

 </td>
 
 <td style="vertical-align:top; padding-left:5px">
 
 <div id="wikiheader">
 
 <span style="font-size:120%;font-weight:bold">AC2_OptFlow</span>
 &nbsp;
 <div> 
 
 
 
 <br>
 
 
 <a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow?wl=zh-Hant" title="zh-Hant">zh-Hant</a>
 , 
 
 
 
 <a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow?wl=pt-BR" title="pt-BR">pt-BR</a>
 , 
 
 
 
 <b>en</b>, 
 
 
 
 <a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow?wl=zh-Hans" title="zh-Hans">zh-Hans</a>
 , 
 
 
 
 <a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow?wl=de" title="de">de</a>
 , 
 
 
 
 <a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow?wl=es" title="es">es</a>
 
 
 
 
 <div id="wikiauthor" style="float:right">
 Updated <span title="Wed Apr 24 08:46:07 2013">
 Apr 24, 2013</span>
 
 by 

 <a class="userlink" href="https://code.google.com/u/100006106134922546874/">j...@3drobotics.com</a>
 
 </div>
 </div>
 </div>
 
 <div id="wikicontent">
 <div class="vt" id="wikimaincol">
 <h2><a name="Optical_Flow_Sensor"></a>Optical Flow Sensor<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Optical_Flow_Sensor" class="section_anchor"></a></h2><p><a href="http://store.diydrones.com/ProductDetails.asp?ProductCode=BR-0016-01" rel="nofollow"><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/BR-0016-01-2T.jpg"></a> <a href="http://store.diydrones.com/ProductDetails.asp?ProductCode=BR-0016-01" rel="nofollow"><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/BR-0016-01-5T.jpg"></a> </p><p>To improve position hold accuracy ArduCopter now supports the <strong></strong><strong></strong><strong></strong><strong></strong><strong></strong><strong> sold by the DIY Drones store.  </strong></p><hr><h2><a name="Connecting_the_sensor_to_the_APM1"></a>Connecting the sensor to the APM1<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Connecting_the_sensor_to_the_APM1" class="section_anchor"></a></h2><ul><li>Directly solder wires to the top of the Oilpan as shown below </li><li>Default mounting is lens pointing down, pins forward </li></ul><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/Optical_Flow_Sensor_v_1_0.jpg"> </p><hr><h2><a name="Connecting_the_sensor_to_the_APM2"></a>Connecting the sensor to the APM2<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Connecting_the_sensor_to_the_APM2" class="section_anchor"></a></h2><ul><li>Power, GND, NCS pins should be attached to A3 </li><li>MISO, MOSI and SCLK pins should be directly soldered to the pins shown </li><li>Default mounting is lens pointing down, pins forward </li></ul><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/Optical_Flow_Sensor_APM2.jpg"> </p><hr><h2><a name="Connecting_the_sensor_to_the_APM2.5"></a>Connecting the sensor to the APM2.5<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Connecting_the_sensor_to_the_APM2.5" class="section_anchor"></a></h2><ul><li>Connect VCC, GND, MISO, MOSI, SCLK and NCS pins as shown in the diagram below (it's a standard [<a href="http://www.instructables.com/id/Adding-ICSP-header-to-your-ArduinoAVR-board/step3/ICSP-header-pinout/" rel="nofollow">http://www.instructables.com/id/Adding-ICSP-header-to-your-ArduinoAVR-board/step3/ICSP-header-pinout/</a> ICSP header) </li><li>Default mounting is lens pointing down, pins forward </li></ul><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/Optical_Flow_Sensor_APM25.jpg"> </p><ul><li>Cut and resolder the MISOLVL jumper on the back of the board to switch the MISO pin to work on 3.3v.  This is critical to ensure the optical flow sensor does not interfere with the MPU6000. </li></ul><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/Optical_Flow_Sensor_APM25_SolderBridge.jpg"> </p><hr><h2><a name="Testing_the_sensor"></a>Testing the sensor<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Testing_the_sensor" class="section_anchor"></a></h2><ul><li>Open the <a href="http://code.google.com/p/ardupilot-mega/source/browse/libraries/AP_OpticalFlow/examples/AP_OpticalFlow_test/AP_OpticalFlow_test.pde" rel="nofollow">AP_OpticalFlow_test.pde</a> sketch in the arduino IDE </li><li>if you are using an APM2 modify lines 22 and 23 to look like below: </li><pre class="prettyprint"><span class="com">//AP_OpticalFlow_ADNS3080 flowSensor; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // for APM1</span><span class="pln"><br>AP_OpticalFlow_ADNS3080_APM2 flowSensor</span><span class="pun">(</span><span class="pln">A3</span><span class="pun">);</span><span class="pln"> &nbsp;</span><span class="com">// override chip select pin to use A3 if using APM2</span></pre><li>Upload the test sketch to your APM </li><li>Connect to your APM with the Serial Monitor or AP Mission Planner Terminal </li><li>type 'c' to ensure that the sensor is responding to the APM </li><li>type 'm' and move the camera back and forth and check that x,y values change.  If they do not change, modify the focus of the lens by turning it left or right. </li></ul><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/OpticalFlow_test.jpg"> </p><h2><a name="Capturing_an_image_from_the_sensor"></a>Capturing an image from the sensor<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Capturing_an_image_from_the_sensor" class="section_anchor"></a></h2><p>In order to check that you have the lens properly focussed you can capture an image directly from the sensor and display it using a simpler viewer written in Python. </p><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/ADNS3080ImageGrabber.jpg"> </p><ol><li>Upload the AP<i>OpticalFlow_test.pde to the APM (see above) </i></li><li><i>Install Python 2.7 (or later version) from <a href="http://www.python.org/getit/" rel="nofollow">http://www.python.org/getit/</a> (For windows users, for compatibility with pyserial, you should install the <a href="http://www.python.org/ftp/python/2.7.2/python-2.7.2.msi" rel="nofollow">32bit version</a> even if you are running 64bit windows) </i></li><li><i>Install <a href="http://pyserial.sourceforge.net/" rel="nofollow">PySerial 2.5</a>.  The Windows package is <a href="http://pypi.python.org/packages/any/p/pyserial/pyserial-2.5.win32.exe#md5=ea4579b9ad39a4f0171c3ec3da0a8212" rel="nofollow">here</a>. </i></li><li><i>Start the Python IDLE editor  </i></li><li><i>File, Open, .../arduino-0022/libraries/AP</i>OpticalFlow/examples/ADNS3080ImageGrabber/ADNS3080ImageGrabber.py  </li><li>Run, Run Module - the Python Shell and then ADNS3080ImageGrabber applications should appear  </li><li>On the ADNS3080ImageGrabber screen, change the default com port to the port connected to your APM and press Open </li><li>Push the Send button to start/stop grabbing images from the sensor (a new image should appear every 2 seconds)   </li></ol><p>  Note 1: After capturing images, you will need to reset the sensor (i.e. plug/unplug it) to restore it to the normal motion capture mode. </p><p>Note 2: you should see the the AP<i>OpticalFlow_ADNS3080's menu and any errors appear in the Python Shell  </i></p><hr><h2><a name="How_it_works"></a>How it works<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#How_it_works" class="section_anchor"></a></h2><p>The mouse sensor returns the average movement (in the x and y directions) of surface features that it sees.  A single pixel move will not cause the sensor to return "1".  It will return a higher value around 5.  This value is referred to as the <strong>scaler</strong> below.  In the example below, the value returned would be about 1.6 ( (-5+5+5) / 3) </p><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/SurfaceFeatures.png"> </p><p><strong>Sensor's x and y values can be converted to real distances based on altitude</strong> </p><p>In order to convert values from the sensor to real distances moved, we need to take into account the altitude.  This is necessary because as you can see from the two pictures below, if we have two quads moving the same distance, but one at a low altitude, the other at a higher altitude, the lower quad will see surface features appear to move further and this will result in a higher optical flow values </p><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/AltitudesEffectOnSensorValues.png"> </p><p><img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/distanceMovedFormula.png"> </p><p><strong>We compensate for vehicle roll and pitch changes</strong> </p><p>Change in the vehicle's roll and pitch will also cause changes in the x and y values returned by the sensor.  Unlike the lateral movement calculations these are not dependent upon the distance of the visible objects.  In the picture below you can see that as the quad has rolled 10 degrees but both flowers have moved from the center of the camera's view in the 1st pic to the edge of the view in the 2nd pic.     <img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/RotationEffectOnSensorValues.png"> </p><p>The expected change in sensor values can be calculated directly from the change in roll and pitch given the formula below.  We subtract these expected changes from the real values returned by the sensor. <img src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/expectedRollChangeFormula.png"> </p><p>Once we have the x/y movements we can integrate these values over time with the current yaw to arrive at an estimate of position. </p><hr><h2><a name="Known_issues"></a>Known issues<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Known_issues" class="section_anchor"></a></h2><ul><li>The sensor only works in well lit environments </li><li>A fixed-focus lens is used meaning it cannot focus on objects closer than 30cm (1 foot). </li><li>Rotating the sensor will confuse the sensor </li></ul><hr><h2><a name="Acknowledgements:"></a>Acknowledgements:<a href="https://code.google.com/p/arducopter/wiki/AC2_OptFlow#Acknowledgements:" class="section_anchor"></a></h2><ol><li><a href="http://www.diydrones.com/profile/MarkoKleineBerkenbusch" rel="nofollow">Marko Klein Berkenbusch's</a> <a href="http://www.diydrones.com/profiles/blogs/quad-position-hold-with-mouse" rel="nofollow">position hold with mouse sensor</a> </li><li>research paper re <a href="http://www.araa.asn.au/acra/acra2007/papers/paper181final.pdf" rel="nofollow">optical flow for position hold</a> </li><li>research paper re<a href="http://www.mecatronica.eesc.usp.br/wiki/upload/0/0a/2006_Thesis_Remote_Terrain_Navigation_for_Unmanned_Air_Vehicles.pdf" rel="nofollow">optical flow for object avoidance</a> </li></ol>
 </div>
 </div>
 </td></tr><tr>
</tr></tbody></table>
 </div>


 
 <div id="wikicommentcol">
 


 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 

<div class="collapse">


 


<div id="commentlist">

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/113198572100358680195/">cherb...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jul 20 14:07:59 2011">Jul 20, 2011</span>
 <div>
<div class="commentcontent">
<p>default install of Py does not seem to have Serial installed? </p><p>Python 2.7.2 (default, Jun 12 2011, 14:24:46) v.1500 64 bit (AMD64)<a href="https://code.google.com/p/arducopter/w/edit/MSC">?</a> on win32 Type "copyright", "credits" or "license()" for more information. &gt;&gt;&gt; ================================ RESTART ================================ &gt;&gt;&gt;  </p><p>Traceback (most recent call last): </p><blockquote>File "C:\Users\johnc\Desktop\arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\examples\ADNS3080ImageGrabber\ADNS3080ImageGrabber.py", line 3, in &lt;module&gt; 
<blockquote>import serial 
</blockquote></blockquote>ImportError<a href="https://code.google.com/p/arducopter/w/edit/ImportError">?</a>: No module named serial <p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jul 20 14:32:04 2011">Jul 20, 2011</span>
 <div>
<div class="commentcontent">
<p>thanks for that, i've updated the python instructions above! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">Garrick....@gmail.com</span>,
 
 </span>
 <span class="date" title="Mon Jan  9 12:06:32 2012">Jan 9, 2012</span>
 <div>
<div class="commentcontent">
<p>What is the suggested mounting method for the the jdrones or 3DR frames?  Will there be mounting brackets needed or available for it? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110770942895175078480/">mrahus...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Jan  9 14:38:11 2012">Jan 9, 2012</span>
 <div>
<div class="commentcontent">
<p>I am currently using the sonar mounts on a 3DR frame secured with zipties. Its placed pretty well so far. However a dedicated mount would be nice. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100728435670432124997/">tomas.so...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Jan 10 14:38:23 2012">Jan 10, 2012</span>
 <div>
<div class="commentcontent">
<p>How sensitive is the flow sensor to vibrations? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100728435670432124997/">tomas.so...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Jan 10 14:41:16 2012">Jan 10, 2012</span>
 <div>
<div class="commentcontent">
<p>Please add instructions for connecting the Optical Flow Sensor to the new APM hardware (version 2). Thanks </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Jan 12 05:28:06 2012">Jan 12, 2012</span>
 <div>
<div class="commentcontent">
<p>@Garrick, Mrahusain, </p><blockquote>Yes, we should have a dedicated mount.  I might make a 3d printed one but it'd be better if it was in the diydrones store.  I'll suggest it. 
</blockquote><p></p><p>@Tomas, </p><blockquote>I've mounted on a quad and a heli and the vibrations haven't been a problem but I haven't specifically tested it. 
I've been having a look at connecting the servo to the APM2.  Having some troubles with interference if I use the SPI bus that is shared with the MPU6000 but fully expect it will be ok if I connect it to the SPI shared with the dataflash (which is the situation on the APM1).  It'll be at least a week before I get that sorted I think. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/115106667239992662740/">wayne.ho...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Jan 12 08:11:36 2012">Jan 12, 2012</span>
 <div>
<div class="commentcontent">
<p>The source code at <a href="http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow" rel="nofollow">http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow</a> seems to indicate a connection to the RST pin, but the connection diagram above does not show such a connection.  Is this a mistake in the diagram, or was the use of the RST pin dropped for some reason? </p><p>Also, the schematic at <a href="http://stuff.storediydrones.com/Optical_Flow.rar" rel="nofollow">http://stuff.storediydrones.com/Optical_Flow.rar</a> seems to be incomplete, as it does not show a connection from the edge connector to the MOSI (or was it the MISO?) pin.  Not a big deal, but it should be corrected, IMO. </p><p>Wayne </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Jan 13 05:34:47 2012">Jan 13, 2012</span>
 <div>
<div class="commentcontent">
<p>@wayne, </p><blockquote>thanks for checking out the schematics.  You're right that the reset pin was dropped because I had troubles finding a free APM pin strong enough to drive it up and down.  If you want to give a try to finding one I'll update the library and diagrams to use it!  The only time it's really required is after your capture an image using the example sketch because the sensor can't return to normal mode without being reset (so people have to temporarily disconnect and reconnect the sensor after grabbing an image). 
</blockquote><p></p><blockquote>I think it's actually the ground pin that's not connected in the .brd file.  I'll ask Lorenzo or Sam to have a look. 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/115106667239992662740/">wayne.ho...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Jan 13 12:36:21 2012">Jan 13, 2012</span>
 <div>
<div class="commentcontent">
<p>Thanks for the quick reply about the RESET pin.  I tried to use it at first, but I could not get the init() code to run with the pin connected, so I removed it.  I don't understand your comment about needing a pin strong enough to drive RESET up and down, however.  On the board schematic, this line has a 1K resistor in series with it, so it seems like any standard I/O line could drive it.  Or, am I missing something? </p><p>Also, on the MISO line, I looked again and I think my confusion was that, on the schematic, the MISO output pad is right next to the connection point on the chip (rather than shifted to the left to be in line with the other SPI pins.)  So, at first glance, it looked like it wasn't connected.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Jan 13 15:57:32 2012">Jan 13, 2012</span>
 <div>
<div class="commentcontent">
<p>@wayne, </p><blockquote>The very first batch of 70 optflow sensors (the ones that sold out the same day as the announcement) went out with a 10k pin on the reset line.  The 2nd batch has a 1k pin.  Even with the 10k pin it can be reset from any of the 3 APM pins that controls the LEDs but of course then you either lose an LED or you reset quite often as it blinks which is no good!  If you can find a pin that works please tell me and we'll make that the standard although like I said, the reset isn't really critical as it's only used after you grab an image which is only done when testing. 
I asked Lorenzo from 3dRobotics to check the sketch and he said they're ok including the ground pin.  This plus your comments above and it looks like it's a-ok. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/112670657625775422589/">graham.b...@hotmail.co.uk</a>,
 
 </span>
 <span class="date" title="Mon Jan 16 11:17:46 2012">Jan 16, 2012</span>
 <div>
<div class="commentcontent">
<p>Just in the process of adding "Flow" to my 3DR Quad with APM2. Fixed it with a double sided gyro foam pad to a second Sonar crossbar mount.  Looks like it was made for it :o) </p><p>Does anyone know how its wired up to the APM2 board?  An update to the WIKI would be perfect! </p><p>Many thanks for the development so far... </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Jan 16 13:47:19 2012">Jan 16, 2012</span>
 <div>
<div class="commentcontent">
<p>Graham: the optical flow sensor is not currently supported by APM 2. We'll make an announcement when we have that working.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100728435670432124997/">tomas.so...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jan 18 05:19:10 2012">Jan 18, 2012</span>
 <div>
<div class="commentcontent">
<p>I think it would be very desirable to have an explicit statement in the AC wiki, located so you cannot miss it, stating clearly whatever features are not yet implemented in the APM2. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jan 18 07:30:25 2012">Jan 18, 2012</span>
 <div>
<div class="commentcontent">
<p>tomas: optical flow is the only one.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">kunalbaj...@gmail.com</span>,
 
 </span>
 <span class="date" title="Fri Jan 27 16:27:49 2012">Jan 27, 2012</span>
 <div>
<div class="commentcontent">
<p>After I run the optical flow test code on the arduino IDE and type 'm' in the serial monitor I do not get any change in the values... Can anyone help me here </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Jan 27 16:55:32 2012">Jan 27, 2012</span>
 <div>
<div class="commentcontent">
<p>@kunal, </p><blockquote>Two likely causes: 
<ol><li> you just captured an image before you ran 'm'.  After capturing an image you need to reset the sensor (i.e. disconnect/reconnect power) to get it back into the normal mode where it will report movement. </li></ol><blockquote>2. you're in too dark a location.  Check out the surface_quality values (3rd column I believe).  If they're too low (like &lt;20) the sensor won't see any movement. 
</blockquote></blockquote>-Randy <p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">kunalbaj...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Jan 28 09:10:00 2012">Jan 28, 2012</span>
 <div>
<div class="commentcontent">
<p>Thanks Randy, I'll give it a shot today.. BTW did anyone achieve nice position hold after the attaching this sensor ? Stability is of huge importance in my project, I would be happy if someone got it to work like in the videos that had been put up here <a href="http://diydrones.com/profiles/blog/show?id=705844%3ABlogPost%3A713013&commentId=705844%3AComment%3A713115" rel="nofollow">http://diydrones.com/profiles/blog/show?id=705844%3ABlogPost%3A713013&amp;commentId=705844%3AComment%3A713115</a>  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Jan 30 05:20:58 2012">Jan 30, 2012</span>
 <div>
<div class="commentcontent">
<p>@kunal, </p><blockquote>I don't think anyone but me has achieved that level of performance..but then again, not many have tried yet! 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100654189857226822958/">estebanf...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Feb 12 18:47:14 2012">Feb 12, 2012</span>
 <div>
<div class="commentcontent">
<p>Can I run a sonar sensor at the same time? they seem to be sharing the 5v pin. thx! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Feb 13 02:43:08 2012">Feb 13, 2012</span>
 <div>
<div class="commentcontent">
<p>yes, you can definitely use both.  In fact, the optical flow sensor relies on good altitude info for position hold so having a sonar is a good idea.  The 5V line is just providing power, so no problem sharing with other devices. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100654189857226822958/">estebanf...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Feb 18 08:51:17 2012">Feb 18, 2012</span>
 <div>
<div class="commentcontent">
<p>There is five files on the source: </p><p>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h keyboards.txt </p><p>If I add all these to the arducopter sketch and upload it to my APM, Do I get OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a> working? Thx! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Feb 19 19:42:09 2012">Feb 19, 2012</span>
 <div>
<div class="commentcontent">
<blockquote>The <a href="http://code.google.com/p/ardupilot-mega/source/browse/libraries/AP_OpticalFlow/examples/AP_OpticalFlow_test/AP_OpticalFlow_test.pde" rel="nofollow">example sketch</a> is the one you should use to test the sensor as a first step.  If you have the code downloaded correctly and have arduino ide's "sketchbook location" set to the top level directory where the code is installed you should be able to load the example sketch using File, Examples, AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>, AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test. 
<blockquote>When you actually want to test it on your arducopter, you should set one of your switches to OF_LOITER flight mode using the AP Mission Planner. 
</blockquote></blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/shimniok/">shimniok</a>,
 
 </span>
 <span class="date" title="Mon Feb 20 07:25:23 2012">Feb 20, 2012</span>
 <div>
<div class="commentcontent">
<p>Looking forward to trying the sensor.  Just a nit pick: "display it using a simpler viewer written in Python." should read "display it using a simple viewer written in Python" in the docs above. Thanks. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">kunalbaj...@gmail.com</span>,
 
 </span>
 <span class="date" title="Mon Feb 20 15:45:00 2012">Feb 20, 2012</span>
 <div>
<div class="commentcontent">
<p>@rmackay: Hey, its me again. I tried the OF loiter mode and I had no luck getting it to achieve the level of stability illustrated in the video. Could you please tell me what exactly are the steps that I need to follow in order to get my Quad to hover in place? Its really crucial to my project and I have a couple of deadlines approaching me as well. I tried tweaking the PID gains but still no luck, if you could help me out with this issue you are a ROCKSTAR! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">taylorda...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Feb 25 21:49:44 2012">Feb 25, 2012</span>
 <div>
<div class="commentcontent">
<p>Any word on the ETA of the Optical Flow Sensor working with APM2? </p><p>-Thanks- </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Feb 25 22:00:15 2012">Feb 25, 2012</span>
 <div>
<div class="commentcontent">
<p>APM 2 won't support optical flow until the next hardware version. Probably late March. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100654189857226822958/">estebanf...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Feb 26 21:48:06 2012">Feb 26, 2012</span>
 <div>
<div class="commentcontent">
<p>thank you Mackay! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/101464959872854116774/">wingrun...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Feb 29 10:29:28 2012">Feb 29, 2012</span>
 <div>
<div class="commentcontent">
<p>Next hardware version meaning an updated Optical Flow sensor?  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">modene...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Mar  1 08:14:11 2012">Mar 1, 2012</span>
 <div>
<div class="commentcontent">
<p>Sry, only to understand well. If i connect this optical flow sensor i no need sonar like EZ0 , this one do the same thing right? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Mar 10 10:40:37 2012">Mar 10, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi - concerning the Feb 25th comment and question; will it take a new version of APMv2 (Mine is coming "soon" (next week?)) or the optical flow device? </p><p>I have an optical flow device v1.0; will I need to repurchase anything? </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Mar 10 21:33:25 2012">Mar 10, 2012</span>
 <div>
<div class="commentcontent">
<p>@wingrunr21 &amp; Mark, </p><blockquote>It's the APM2 that had to be changed a bit to work with optical flow (In case you're wondering there was a small issue with the SPI pins on the front left side of the APM2 were 5V instead of 3.3V - the new version allows either).  So you shouldn't need to purchase anything. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">Ericgamb...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sun Mar 11 23:42:22 2012">Mar 11, 2012</span>
 <div>
<div class="commentcontent">
<p>Sorry to ask, but am I understanding this is or is not working with APM 2 now? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">fgot...@googlemail.com</span>,
 
 </span>
 <span class="date" title="Sat Mar 24 17:03:48 2012">Mar 24, 2012</span>
 <div>
<div class="commentcontent">
<p>I have got a first version 2.4.1 of the APM2. Can i use the optical flow sensor, if not, can i hack it or do i need to purchase a new one ? </p><p>Cheers </p><p>Florian </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Mar 24 18:01:06 2012">Mar 24, 2012</span>
 <div>
<div class="commentcontent">
<blockquote>There's a problem with the APM2 and the optical flow.  In particular the messages from the optical flow sensor are causing the messages from the MPU6000 to become garbled because the level converter on the APM2 is getting confused about which one is doing the talking. 
I suspect there's going to be a revision to the APM2 to provide a clean solution to the problem but I guess what the two of you need is a wiring + software change to make it work with the current revision of the APM2...if it works, the wiring will be a bit fiddly. 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104956404395833052083/">QandG...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Apr  5 03:33:58 2012">Apr 5, 2012</span>
 <div>
<div class="commentcontent">
<p>Having bought an optical flow sensor with my APM 2 from 3drobotics I was a bit surprised to find it isn't supported yet! We're now in April 2012, is there any news if this works and how to connect it yet? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Apr  6 10:08:50 2012">Apr 6, 2012</span>
 <div>
<div class="commentcontent">
<p>I have a flow sensor and a recent (23rd March 2012 announcment, if I have it correctly) APMv2. </p><p>I'm not bad with a soldering iron, and I'm not scared to build (say) a level-shifter, but I'm not really sure what the problem actually is, apart from it being a 5V vs 3.3V issue. </p><p>Could somebody please spell it out? I reluctant to experiment as I don't want to screw anything up. I understand the SPI protocol; If all I need is buffers, I can do this. </p><p>Thanks! </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">benach...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sun Apr  8 09:04:13 2012">Apr 8, 2012</span>
 <div>
<div class="commentcontent">
<p>i didn't understand the way u caculate the returned value in the first pic of How it works section. where the +5 and the -5 values come from? also i am lack of information about the optical part. what are the limitations and the equations i i change my lenses? My last question is about Object recognition, how does the 3080 does that?  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Apr 13 07:28:54 2012">Apr 13, 2012</span>
 <div>
<div class="commentcontent">
<p>I think I have a handle on this. </p><p>There is a level-shifter called a TBX0104 on the APMv2 that sorts out the difference between the 5v0 logic on the processor side vs the 3v3 logic on the peripheral side. It looks like the problem may be due to connecting the external SPI pins on the 5v0 side of the level shifter, where the actual logic levels off the flow sensor are 3v3. I can see how this may confuse the TBX0104 into not changing direction. </p><p>I'm guessing that boosting the flow sensor's logic to 5v0 levels will do the job, and a CMOS buffer to do this is cheap. Time to stick a scope on and give it a go. </p><p>Comments from the designers? :-) </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Apr 13 07:51:57 2012">Apr 13, 2012</span>
 <div>
<div class="commentcontent">
<p>Mark, </p><blockquote>Yes, you're very close to describing the problem.  I'm convinced it's the level shifter that's the problem.  I don't think though that pushing the optical flow sensor up to 5v will solve the problem.  The issue is not the optical flow sensor's message not getting through, it's the MPU6000's that are getting garbled. 
</blockquote><blockquote>I think the problem is that we have some sensors on one side of the level shifter, and some on the other.  The level shifter is bi-directional so it has to make a decision moment-by-moment on which way the message is going.  When the MPU6000 is talking on it's own, it's messages (on the Master-In-Slave-Out line) get through clearly but once the optical flow is attached some of the MPU6000's messages get through but about half are disrupted with little spikes down to zero.  I have attached a scope and I can see this (I would attach the image here but can't figure out how - perhaps it's not possible).  I don't think a 3v-&gt;5v level shifter on the optical flow will help because..really..when the message are being disrupted the optical flow is outputting zero on the MISO line..so why would it matter if at other times it goes to 5v?  at the time it's causing trouble, it's zero anyway. 
</blockquote><blockquote>Slightly anecdotal but I've managed to get the optical flow and MPU6000 to play well with each other if I attach the MISO pin of the optical flow sensor on the 3.3v side of the shifter. 
</blockquote><blockquote>I think the final solution is going to be one (or both of the following): 
<ol><li>) modify the APM2 so that the external SPI pins can be on the 3.3v side of the level shifter.  This causes some problems because those same pins are used to load the bootloader onto the 2560 at the factory. </li><li>) attach the optical flow sensor to the same SPI pins that are used for the dataflash (which lies on the daughter board).  This is tricky because the pins are really close together.  If you look at the pins that attach the main board to the daughter board you'll see they are very fine pitch.  This option also means modifying the optical flow library to use the other SPI port.  I was hoping to do that last weekend but still haven't quite gotten to it yet.  I will soon I hope! </li></ol></blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Apr 13 08:02:37 2012">Apr 13, 2012</span>
 <div>
<div class="commentcontent">
<p>benachtal, </p><blockquote>the optical flow sensor can't do image recognition.  It just senses movement. 
</blockquote><blockquote>So to try and help clarify the formula that is written below the picture with the red and blue flowers...  So the pictures shows one blue flower moving left and two red flowers moving right.  The line below the picture says, "the value returned would be about 1.6 ( (-5+5+5)/3 )".  
</blockquote><blockquote>So first of all..what are the "-5", "+5" and "+5" in that formula?  well..the blue flower moving left one pixel is -5.  It's not -1 because the sensor scales all movement it sees up by 5x (don't ask me why).  Left is seen as negative movement and right is seen as positive movement. 
</blockquote><blockquote>Next, what is the "/3"...well..the sensor simply averages all movement it sees.  So if one flower moves left and two flowers move right..the result is a slight movement to the right. 
</blockquote><blockquote>Hope that makes it a little more clear. 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Apr 13 08:25:02 2012">Apr 13, 2012</span>
 <div>
<div class="commentcontent">
<p>@rmackay: </p><p>Thanks for that! I'm thinking of another experiment with a tristate buffer. If one were to connect the MISO line from the flow sensor to the external SPI via something like (say) a 74AC244 or 74HC244, with that chip's #OE connected to the NCS pin (That is A5, right?) is that likely to help suppress garbage on MISO while boosting the signal level acceptably? If that works, the I guess that a "little logic" single buffer may do a lightweight repair job. </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Apr 15 10:17:32 2012">Apr 15, 2012</span>
 <div>
<div class="commentcontent">
<p>@rmackay: </p><p>Hi </p><p>Out of interest, when you are getting the disruptive zero-level spikes on MISO, what does the other side (the flow/5V side) of the level-shifter look like? Also, what does the NCS for the flow sensor look like? </p><p>I'm setting up to replicate your measurements, but I'll be rather slow in doing it due to a disability. </p><p>Thanks! </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/115547082158819557111/">nolagri...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Apr 15 15:29:57 2012">Apr 15, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, </p><p>I want to buy the sensor in my APM2 quadcopter. You know if the sensor will be in stock soon? </p><p>Thanks, Lot Amorós. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Apr 17 04:38:17 2012">Apr 17, 2012</span>
 <div>
<div class="commentcontent">
<p>@Mark, </p><blockquote>Although I didn't immediately reply to the emails above I did read them and was thinking about them.  The disruptive spikes were on the 5v side of the level convert (i.e. the same side as the Atmel 2560 CPU).  I never checked the the 3.3v side actually, that might be interesting to see.  I'm not sure about 4.7v being a problem or not.  I think I've measured the voltage across some of the APM pins and also seen about that voltage and I've just assumed that it's ok..it seems to have been so far. 
</blockquote><p></p><blockquote>Over the weekend I managed to successfully attach the flow sensor to the SPI bus that the dataflash uses (it's actually UAT3 but in SPI mode).  The pins are on the little black 12pin connector that connects the daughter board to the main board.  In particular it's the 3 pins on the front right of that connector (front being where the radio input pins come in).  I still need to test that the dataflash messages aren't disrupted but I think they will be ok.  This will mean a new blob of code to use a different library when using the APM2 vs APM1 but that's manageable. 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/117088760537659549588/">hilltopf...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Apr 25 06:34:53 2012">Apr 25, 2012</span>
 <div>
<div class="commentcontent">
<p>I don't think I solder well enough to make the minute connections on the 3 front/right pins. I'd hate to ruin my new APM2 by having the pads I'm soldering to pull up from the board. Am I being overly cautious? Is there no other way to connect the optical flow sensor? Suggestions? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Apr 25 06:39:04 2012">Apr 25, 2012</span>
 <div>
<div class="commentcontent">
<p>hilltopflyer, </p><blockquote>The original hope with the APM2 was that you could just plug it in instead of having to solder anything but sadly we found a problem after the APM2s had already gone into production re interference with the MPU6000 (they both work fine when tested individually but not together!). 
The only way that I've been able to get the sensor to work with the APM2 is to solder it as shown in the pictures above.  It is fiddly but very possible.  
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/117088760537659549588/">hilltopf...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Apr 25 08:16:03 2012">Apr 25, 2012</span>
 <div>
<div class="commentcontent">
<p>I guess I'll gather up some old pcb's with surface mounted devices on them and start practicing my micro soldering... </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Apr 26 02:29:14 2012">Apr 26, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi </p><p>What's the <a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a> APM firmware release schedule or URI for this info, please? </p><p>Thanks! </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Apr 26 04:07:56 2012">Apr 26, 2012</span>
 <div>
<div class="commentcontent">
<p>Mark, </p><blockquote>Normally we ship a new version about every 3 weeks.  Maybe May 10th-ish? 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104920640167255133531/">mrvmur...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Apr 26 04:22:40 2012">Apr 26, 2012</span>
 <div>
<div class="commentcontent">
<p>RMacKay: Thanks! </p><p>M </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">Matt.Cur...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Apr 26 20:21:13 2012">Apr 26, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi All, </p><p>Currently flying the APM1 with sonar, telemetery, GPS and compass and all has been well. Quadcopter about 600mm between motors. havent had to play with PIDS at this stage and it flys well. One thing that I was very keen to improve though was its position hold at low leves and I have since instaaled the optical flow camera. I have been very careful to get it wired correctly, and I have configured it under the hardware options in Mission planner. The problem is though, it wont initalise. I use the terminal to run tests and it also reports that it can't initalise the optflow. Aside form running the test scipt etc is there anything else I should look for? Everything to date has been pretty much plug and play.... Help greatly appreciated! Regards Matt </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">Matt.Cur...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Apr 26 21:37:06 2012">Apr 26, 2012</span>
 <div>
<div class="commentcontent">
<p>I probably should have said that I'm running Arducopter V2.5.4...... </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Apr 28 23:34:17 2012">Apr 28, 2012</span>
 <div>
<div class="commentcontent">
<p>Matt, </p><blockquote>Are you usign an APM1 or APM2?  If it's an APM2 you'll need to wait for 2.6 to come out for optical flow support to work. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/117088760537659549588/">hilltopf...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon May 14 05:32:35 2012">May 14, 2012</span>
 <div>
<div class="commentcontent">
<p>Any idea on when to expect 2.6? Am I safe connecting (soldering) everything as outlined above on the APM2? Is anything else likely to change w.r.t. the work-around attaching it to the SPI bus? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed May 16 05:29:01 2012">May 16, 2012</span>
 <div>
<div class="commentcontent">
<p>@hilltopflyer, </p><blockquote>Well..actually..we just pushed 2.5.5 and it has the patch for the optical flow to work with the APM2.  Now I flew it again on the APM2 about a week ago and it worked but needed some tuning.  Anyway, give it a try and let's see how it goes for you. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/105836527222165980867/">virgi...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Jun  5 09:01:50 2012">Jun 5, 2012</span>
 <div>
<div class="commentcontent">
<p>IS Flow sensor working at the moment? (2.5.5)? then I am going to do solder job :) </p><p>Virgis </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/118087650381190073304/">mikko.he...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jun 13 15:49:54 2012">Jun 13, 2012</span>
 <div>
<div class="commentcontent">
<p>My sensors says that it don't get data from  ADNS3080 - what can be reason? I compiled program and tested it but it always says that init fail because  ADNS3080 don't reply. Is it broken or is it possible that I have program problem? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100998162838773508496/">emine...@gmx.de</a>,
 
 </span>
 <span class="date" title="Sat Jun 16 08:11:47 2012">Jun 16, 2012</span>
 <div>
<div class="commentcontent">
<p>APM2 with Optical Flow 1.0: I got the Python Image Grabber running but I'm only getting back a white picture from it. With "I - display image continously" I can see some flickering in the grid as it updates white by white. Even fully covering the lens or changing the focus doesn't change anything. </p><p>"m" gets me the following: </p><p>overflow!! </p><p>x/dx: counting up/1   y/dy: counting up/1   squal:255 </p><p>Any idea what this could be? </p><p>Brad </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100998162838773508496/">emine...@gmx.de</a>,
 
 </span>
 <span class="date" title="Tue Jun 19 00:25:25 2012">Jun 19, 2012</span>
 <div>
<div class="commentcontent">
<p>maybe AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde at <a href="http://code.google.com/p/ardupilot-mega/source/browse/libraries/AP_OpticalFlow/examples/AP_OpticalFlow_test/AP_OpticalFlow_test.pde" rel="nofollow">http://code.google.com/p/ardupilot-mega/source/browse/libraries/AP_OpticalFlow/examples/AP_OpticalFlow_test/AP_OpticalFlow_test.pde</a> does only work for APM1 and not for APM2? </p><p>Is there another way to test and focus Optical Flow - maybe even in Mission Planner? </p><p>Thanks, </p><p>Brad </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Jun 19 08:43:03 2012">Jun 19, 2012</span>
 <div>
<div class="commentcontent">
<p>@eminem69, </p><blockquote>There's a couple of lines (22 and 23) that you need to change in the example sketch that you upload to the APM2.  Comment out the top line (see below) and uncomment-out the line below. 
</blockquote><p></p><p>//AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080 flowSensor;		// for APM1 AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2 flowSensor(A3);  // override chip select pin to use A3 if using APM2 </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100998162838773508496/">emine...@gmx.de</a>,
 
 </span>
 <span class="date" title="Tue Jun 19 11:22:06 2012">Jun 19, 2012</span>
 <div>
<div class="commentcontent">
<p>Thanks Randy! I wasn't paying attention to the code. I've got it working now. </p><p>Brad </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110592371892203236895/">tweacker...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jun 20 10:48:55 2012">Jun 20, 2012</span>
 <div>
<div class="commentcontent">
<p>Hello all. What is the mounting direction of the sensor on the APM1. It stated in the description above that "pins point forward" but in the picture above the pins pointing backwards. so which one is correct?   </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jun 20 15:23:54 2012">Jun 20, 2012</span>
 <div>
<div class="commentcontent">
<p>Tweacker123, </p><blockquote>Ah, the diagram above is oriented that way just so it's easier to see where the wires are going.  The flow sensor should definitely be lens down, and pins pointing forward. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110592371892203236895/">tweacker...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Jun 21 00:20:23 2012">Jun 21, 2012</span>
 <div>
<div class="commentcontent">
<p>@Tweacker123, thanks for clarifying. I have another question regarding the sensor configuration. My current configurations are: frame rate:     2000 (auto) resolution:     400 shutter speed:  9100 (auto) </p><p>is it not better to increase the frame rate to (6400 f/s) and resolution to 1600? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110592371892203236895/">tweacker...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Jun 21 00:21:49 2012">Jun 21, 2012</span>
 <div>
<div class="commentcontent">
<p>thanks for clarifying. I have another question regarding the sensor configuration. My current configurations are: frame rate: 2000 (auto) resolution: 400 shutter speed: 9100 (auto) </p><p>is it not better to increase the frame rate to (6400 f/s) and resolution to 1600? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Jun 21 05:26:03 2012">Jun 21, 2012</span>
 <div>
<div class="commentcontent">
<p>@Tweacker123, </p><blockquote>The issue that comes when you raise the frame rate is that the sensitivity to light goes down.  I guess if it leave the virtual<a href="https://code.google.com/p/arducopter/w/edit/virtual">?</a> shutter open for longer it gives it more time to collect light.  Shut it too quickly and your image remains mostly black.  That's what I've found anyway.  2000 frames per second is plenty anyway! 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/115547082158819557111/">nolagri...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Jun 23 08:21:42 2012">Jun 23, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, I tested the example code in APM2 and i get this error: "Failed to initialise ADNS3080" </p><p>I cheked the wires and it seems to be connected properly. </p><p>Anyone with his problem? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/116470745028117834627/">gregjack...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jun 27 15:24:53 2012">Jun 27, 2012</span>
 <div>
<div class="commentcontent">
<p>@nolagri - I had the exact issue. I checked the wires, reloaded the test software and tried everything I could think of. Then I checked the wires again. And one wasn't properly connected. Then I tried again and got the same issue. Then I found I must have pulled another wire off by accident. Once fixed, it worked fine. Moral of story - it &lt;could&gt;  &lt;just&gt; be a loose wire! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/113029666569734235284/">betts.j...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Jul  2 11:29:12 2012">Jul 2, 2012</span>
 <div>
<div class="commentcontent">
<p>I've finally figured out how to install and run the test code on my APM2. I've commented out the APM1 code line and uncommented out the APM2 code line. I'm getting "failed to initialize ADNS3080" response, too. I can open the menu and select items to view the options available for shutter speed, etc., but it won't allow me to change any parameters. I've waited a long time for AC2.6 to be available, and spent considerable money to buy your equipment, and have spend MANY hours trying to make it work as it's supposed to, but can't seem to make it work to test/configure it for flight. Here's what I'm getting when trying to capture images... </p><p>sent 'I' to COM5 line 0incomplete (1 of 30), ignoring failed to find first pixel </p><p>line 0incomplete (1 of 30), ignoring failed to find first pixel </p><p>line 0incomplete (1 of 30), ignoring failed to find first pixel </p><p>line 0incomplete (1 of 30), ignoring failed to find first pixel </p><p>line 0incomplete (1 of 30), ignoring failed to find first pixel </p><p>Any suggestions? Ideas? I've double checked the wiring according to the diagram. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/116451577640803692754/">ukspyequ...@googlemail.com</a>,
 
 </span>
 <span class="date" title="Wed Jul 18 11:30:07 2012">Jul 18, 2012</span>
 <div>
<div class="commentcontent">
<p>Sorry but I'm a complete newbie. </p><p>I have an APM 2.0 loaded with 2.6 and also have an optical flow sensor which I would like to add to the APM. </p><p>Wiring is not an issue however trying to follow the above instructions is. </p><p>Would it be possible for someone to guide me on the first step - "Load the AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde sketch to your APM"? </p><p>I've downloaded the "arduino-0022-relaxpatch" and loaded the "AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde" sketch into the app but when I try to upload, several compilation errors are displayed: </p><p>In file included from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp:1: C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:20:24: error: FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>.h: No such file or directory C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:21:21: error: AP_Math.h: No such file or directory C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:22:23: error: AP_Common.h: No such file or directory In file included from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp:1: C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:44: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:45: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:45: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:46: error: use of enum 'Rotation' without previous declaration C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:48: error: 'uint32_t' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:54: error: use of enum 'Rotation' without previous declaration C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h: In destructor 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::~AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>()': C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:42: error: 'NULL' was not declared in this scope C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h: In static member function 'static void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::read(int)': C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:48: error: 'NULL' was not declared in this scope In file included from C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:62, </p><blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp:1: 
</blockquote>C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h: At global scope: C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:81: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:82: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:85: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:86: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:97: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:98: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:98: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:130: error: 'Stream' has not been declared In file included from C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:63, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp:1: 
</blockquote>C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:82: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:83: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:98: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:99: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:99: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:131: error: 'Stream' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:137: error: 'uint16_t' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:22: error: expected constructor, destructor, or type conversion before '(' token AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp: In function 'void setup()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:39: error: 'ROTATION_YAW_180' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp: In function 'void display_config()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:70: error: 'class AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080' has no member named 'read_register' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:73: error: 'class AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080' has no member named 'read_register' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:79: error: 'class AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080' has no member named 'read_register' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.cpp: In function 'void display_image()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:171: error: no matching function for call to 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::print_pixel_data(HardwareSerial<a href="https://code.google.com/p/arducopter/w/edit/HardwareSerial">?</a><strong>)' C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:130: note: candidates are: void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::print_pixel_data(int</strong>) <p></p><p>The one that is highlighted in yellow is: </p><p>FastSerialPort0<a href="https://code.google.com/p/arducopter/w/edit/FastSerialPort0">?</a>(Serial);        // FTDI/console </p><p>I have also used the: sketch &gt; import library &gt; AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a> which does appear to include the associated library. I found this particular library at - <a href="http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow" rel="nofollow">http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow</a> </p><p>Could someone please advise on what I'm doing wrong. </p><p>Sorry if I sound like an idiot! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Jul 18 18:44:47 2012">Jul 18, 2012</span>
 <div>
<div class="commentcontent">
<p>@ukspy, </p><blockquote>Your problem is very common for people just starting out.  You actually don't need to use (in fact, you perhaps cannot use) Arduino 022-relax anymore.  You should use the standard Arduino 1.0.1. 
The error messages you're seeing are because it cannot find the libraries.  In the Arduino app check File, Preferences, Sketchbook location.  This sketchbook location should be set to whatever directory you've put the arducopter code into.  So if you go into that sketchbook location you should see a directory called <a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a> and another called libraries. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/102224167375466366582/">malee...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Jul 20 04:40:25 2012">Jul 20, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, </p><p>is the OF_LOITER mode fully working. I've read on another part of the site that it is still a work in progress. Can I use it to loiter without GPS (in an indoor environment) ? </p><p>Thanks </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/ceirren/">ceirren</a>,
 
 </span>
 <span class="date" title="Sat Jul 21 21:12:16 2012">Jul 21, 2012</span>
 <div>
<div class="commentcontent">
<p>I finally got around to hooking this up to my APM 2.0 (the new case has enough space above the slot for the USB port to feed out the 3 soldered wires!). However, after building and loading AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde , I'm getting the "failed to initialize ADNS3080" error.  </p><p>The solder joints are good, and properly strain-reliefed, and everything passes a continuity test. I see other people are having this problem, but it must be working properly for other people, too. </p><p>Any suggestions? Or might I have to get a new one? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Jul 21 21:39:09 2012">Jul 21, 2012</span>
 <div>
<div class="commentcontent">
<p>@ceirren, </p><blockquote>Ah, I see in the instructions above I haven't mentioned that if you're using an APM2 you need to slightly modify the sketch.  You need to comment out line 22 and uncomment line 23 so it looks like this: 
</blockquote>//AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080 flowSensor;		// for APM1 AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2 flowSensor(A3);  // override chip select pin to use A3 if using APM2 <p></p><blockquote>I'll update the instructions above 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/ceirren/">ceirren</a>,
 
 </span>
 <span class="date" title="Tue Jul 24 12:38:53 2012">Jul 24, 2012</span>
 <div>
<div class="commentcontent">
<blockquote>Thanks for the help! I honestly hadn't read the demo code yet, because I wanted to see if the hardware actually worked, first (I had assumed that, despite doing this crap for a living, I had somehow managed to ESD the sensor). 
</blockquote><p>Aside from some stuck pixels (?), it seems to work! Although it requires a lot of light, I <strong>think</strong> I had it focused now. It'd be great if this code were integrated into the regular build, so that it could be accessed via the command line interface!  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/ceirren/">ceirren</a>,
 
 </span>
 <span class="date" title="Thu Jul 26 11:43:03 2012">Jul 26, 2012</span>
 <div>
<div class="commentcontent">
<p>So, I tried this out yesterday with Arducopter 2.7, and it didn't really work. Normal loiter was holding pretty steady with the new GPS, but the optical flow loiter basically just causes the quad to fly in a huge circle. </p><p>Anyone have this working with the latest firmware? Not really sure what's the problem, since I have it mounted correctly, and the lens properly focused. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/116451577640803692754/">ukspyequ...@googlemail.com</a>,
 
 </span>
 <span class="date" title="Sun Aug  5 03:43:56 2012">Aug 5, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, </p><p>Regarding my earlier problem (copy below). Can anyone tell me which libraries I require and from where to get them in order to compile / load the test application, to allow me to focus the flow sensor? </p><p>Thanks for your time. </p><p>Sorry but I'm a complete newbie. </p><p>I have an APM 2.0 loaded with 2.6 and also have an optical flow sensor which I would like to add to the APM. </p><p>Wiring is not an issue however trying to follow the above instructions is. </p><p>Would it be possible for someone to guide me on the first step - "Load the AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test.pde sketch to your APM"? </i></p><p>I've downloaded the "arduino-0022-relaxpatch" and loaded the "AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test.pde" sketch into the app but when I try to upload, several compilation errors are displayed: </i></p><p>In file included from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test.cpp:1: C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:20:24: error: FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>?.h: No such file or directory C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:21:21: error: AP_Math.h: No such file or directory C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:22:23: error: AP_Common.h: No such file or directory In file included from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>test.cpp:1: C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:44: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:45: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:45: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:46: error: use of enum 'Rotation' without previous declaration C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:48: error: 'uint32_t' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:54: error: use of enum 'Rotation' without previous declaration C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h: In destructor 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?::~AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?()': C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:42: error: 'NULL' was not declared in this scope C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h: In static member function 'static void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?::read(int)': C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:48: error: 'NULL' was not declared in this scope In file included from C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:62, </p><blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test.cpp:1:  
</i></blockquote><p><i>C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080.h: At global scope: C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080.h:81: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080.h:82: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080.h:85: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080.h:86: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080.h:97: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080.h:98: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080.h:98: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080.h:130: error: 'Stream' has not been declared In file included from C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?.h:63, </p><blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test.cpp:1:  
</i></blockquote><p><i>C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080_APM2.h:82: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080_APM2.h:83: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080_APM2.h:98: error: 'byte' does not name a type C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080_APM2.h:99: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080_APM2.h:99: error: 'byte' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080_APM2.h:131: error: 'Stream' has not been declared C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080_APM2.h:137: error: 'uint16_t' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test:22: error: expected constructor, destructor, or type conversion before '(' token AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>test.cpp: In function 'void setup()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test:39: error: 'ROTATION_YAW_180' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>test.cpp: In function 'void display_config()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test:70: error: 'class AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080' has no member named 'read_register' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test:73: error: 'class AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080' has no member named 'read_register' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test:79: error: 'class AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080' has no member named 'read_register' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>test.cpp: In function 'void display_image()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>test:171: error: no matching function for call to 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080::print_pixel_data(HardwareSerial<a href="https://code.google.com/p/arducopter/w/edit/HardwareSerial">?</a>?)' C:\Users\Royce\Desktop\arduino-0022-relaxpatch\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?</i>ADNS3080.h:130: note: candidates are: void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>?<i>ADNS3080::print_pixel_data(int) </i></p><p>The one that is highlighted in yellow is: </p><p>FastSerialPort0<a href="https://code.google.com/p/arducopter/w/edit/FastSerialPort0">?</a>?(Serial); // FTDI/console </p><p>I have also used the: sketch &gt; import library &gt; AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>? which does appear to include the associated library. I found this particular library at - <a href="http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow" rel="nofollow">http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow</a> </p><p>Could someone please advise on what I'm doing wrong. </p><p>Sorry if I sound like an idiot! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100601323134387688032/">patlek...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Aug  6 09:24:17 2012">Aug 6, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi guys, </p><p>I am using a CMUcam4 camera sensor board. It does not support SPI comm only asynchronous serial (Tx and Rx communication). How can I interface this to the board please? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Aug  6 15:54:00 2012">Aug 6, 2012</span>
 <div>
<div class="commentcontent">
<p>@patlekano, </p><blockquote>Do you know if the CMUcam4 has optical flow being calculated on that board itself?  From the wiki it looks more like it implements image tracking.  <a href="http://www.cmucam.org/projects/cmucam4/wiki" rel="nofollow">http://www.cmucam.org/projects/cmucam4/wiki</a> 
</blockquote><p></p><blockquote>We don't have enough spare capacity on the APM2's 2560 atmel chip to do optical flow processing so that needs to be done on the camera itself.  If the board can do that then we would need to write another AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a> class to support the new camera. 
<a href="http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow" rel="nofollow">http://code.google.com/p/ardupilot-mega/source/browse/#git%2Flibraries%2FAP_OpticalFlow</a> 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/102745843216599470073/">drkno...@hotmail.com</a>,
 
 </span>
 <span class="date" title="Sun Aug 19 19:29:30 2012">Aug 19, 2012</span>
 <div>
<div class="commentcontent">
<p>Just in case some other poor SOB comes here to try to figure out where to land the Optical Flow sensor on the ArduPilotMega<a href="https://code.google.com/p/arducopter/w/edit/ArduPilotMega">?</a> 2.5 you should know that it is so far seeming that the only way is to wire MISO, MOSI, and SCK straight to the dataflash card.  </p><p>I have done it, and have a functional OF sensor that initializes and tests correctly in the CLI. I have not however installed the 2.5 and flown this configuration yet. <strong>IF</strong> I ever get a response to a PROPER connection for the 2.5, or have any issues with the OF sensor in flight I will amend this page accordingly. </p><p>Good Luck. My advise is a GOOD magnifying glass, lots of light, a Weller soldering station with brand new tips, and coffee, lots of coffee :-) </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Aug 19 19:47:22 2012">Aug 19, 2012</span>
 <div>
<div class="commentcontent">
<p>@DrKnow<a href="https://code.google.com/p/arducopter/w/edit/DrKnow">?</a>, </p><blockquote>I just got my 2.5 a couple of days ago.  I haven't gotten as far as you but I did notice that there was an SPI port on the front right of the board.  There's two white connectors side-by-side..one says GPS/UART1 and the other says SPI so I was hopeful that we might have an elegant solution for the 2.5.  Now there are actually two SPIs on the 2560, but I think this should be the one we need (i.e the one shared with the dataflash). 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/109570746360053608007/">to...@gmx.net</a>,
 
 </span>
 <span class="date" title="Wed Aug 22 08:38:02 2012">Aug 22, 2012</span>
 <div>
<div class="commentcontent">
<p>Can someone please add a connection diagramm on how to connect to APM 2.5 board? Thank you </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Aug 23 07:25:59 2012">Aug 23, 2012</span>
 <div>
<div class="commentcontent">
<p>@tomyb, </p><blockquote>Yes, I'll add a diagram soon.  As soon as I figure out how to do it!  I hope it will be using the spi port on the front left side of the board.  So will likely require hacking a GPS cable somewhat. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/114344703512141396664/">michaelr...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Aug 25 14:04:00 2012">Aug 25, 2012</span>
 <div>
<div class="commentcontent">
<p>If you look at the schematic, that port next to the GPS that appears to say SPI is, infact, just another GPS connector. It's mentioned in the APM2.5 announcement that there is a new GPS header and a legacy GPS header. I think the "SPI" right there is indicating that the six pins next to it are the ATx-U2's SPI lines... which they are. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/114344703512141396664/">michaelr...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Aug 25 14:06:16 2012">Aug 25, 2012</span>
 <div>
<div class="commentcontent">
<p>I think I have what we are looking for: </p><p>From above before the APM2.5 came out: </p><p>"Slightly anecdotal but I've managed to get the optical flow and MPU6000 to play well with each other if I attach the MISO pin of the optical flow sensor on the 3.3v side of the shifter. I think the final solution is going to be one (or both of the following): 1.) modify the APM2 so that the external SPI pins can be on the 3.3v side of the level shifter. This causes some problems because those same pins are used to load the bootloader onto the 2560 at the factory." </p><p>This does seem to be part of the APM2.5. That's the jumper on the bottom side of the board near the USB jack. </p><p>That suggests to me that the solution is to set that jumper to 3.3v (basically putting MISO on the other side of the level shifter) and then using the old (non APM2) library, except changed to put the Chip Select line at A3. </p><p>I'm trying to get it working right now, but I'm having what may be an unrelated issue with the SCLK line on my SPI port (that is, it's not outputting anything.) I'll post again when I know more. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/102745843216599470073/">drkno...@hotmail.com</a>,
 
 </span>
 <span class="date" title="Sat Aug 25 17:40:48 2012">Aug 25, 2012</span>
 <div>
<div class="commentcontent">
<p>@michael, I tried hooking to the 3.3v side of the MPU6000's SPI bus, it didn't like it. If you look at the gyro in the mission planner while viewing the horizon you will see the gyro drift away the second you even probe it's SCLK line (trace T's off to the baro).  I believe it's a hardware issue, touching that circuit with ANY kind of lead caused problems... </p><p>I went ahead and wrapped mine up with the "test" soldered leads off the dataflash and am assuming since we have had no word that this is all I'm gonna get :-/ </p><p>Just did the maiden, gyro drift issue but otherwise normal. I did not use the Optical flow sensor yet as my training gear blocks it, but I'm not going to maiden this without the buffer of the training gear... once I have the heli flying well I'll pull it off and give the OF a legit test. Maybe tomorrow. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/115547082158819557111/">nolagri...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Sep  2 15:25:44 2012">Sep 2, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, I'm not sure where i can put my question so I write here: </p><p>The mounting direction of the optical flow needs to be the same that the copter? I mean, I can put the optical flow turned 90 degrees? </p><p>Thanks! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Sep  2 18:17:08 2012">Sep 2, 2012</span>
 <div>
<div class="commentcontent">
<p>@nolagrimas, </p><blockquote>It needs to be mounted with the pins facing in the same direction as the copter.  It's a configuration thing...we could have supported other configurations but some times simple is best 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107772139351248827617/">tom...@gmx.net</a>,
 
 </span>
 <span class="date" title="Mon Sep  3 00:31:37 2012">Sep 3, 2012</span>
 <div>
<div class="commentcontent">
<p>Still nobody has a solution on how to wire-up the Optial Flow sensor to the APM2.5? I have everything sitting on my desk waiting to be properly connected ;-) </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Sep  3 01:51:13 2012">Sep 3, 2012</span>
 <div>
<div class="commentcontent">
<p>I'm working on my local machine so I know how to do it but it will require some code changes.  The issue is that we can hitch it up like we did with the APM1 but now we need some automatic way to know if we're using an APM2 or APM2.5..that's the slightly tricky part because there's very little difference between the two from the coding side actually. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107772139351248827617/">tom...@gmx.net</a>,
 
 </span>
 <span class="date" title="Mon Sep  3 05:16:16 2012">Sep 3, 2012</span>
 <div>
<div class="commentcontent">
<p>Can you give a rough estimate when these code changes will be available? Planing to take the copter with me on vacation but i want to have the OF-sensor working first =)... THX!!! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110155545037287678725/">tjudkow...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Sep  7 07:14:10 2012">Sep 7, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, I edited the two lines mentioned above and tried uploading the sketch to APM2.0, but encountered a problem: the verify has gone ok (no errors), but after uploading I got:  avrdude: stk500_getsync(): not in sync: resp=0x0c though it said "Done uploading". when I type "c" in AP Mission Planner Terminal I get: "Invalid command, type 'help' Please help what am I doing wrong?. Does it mean my code didn't upload to my APM2.0 at all? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110155545037287678725/">tjudkow...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Sep  7 08:11:04 2012">Sep 7, 2012</span>
 <div>
<div class="commentcontent">
<p>Do I actually still need to upload that code or is the V2.7.3 already incorporating the changes? I am able to enable optical flow in hardware options, but when I go to Mission Planner Terminal and test it, I only get "x/dx: 0/0 y/dy 0/0 squal:0" </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/118166730872426531253/">br...@caseyclan.net</a>,
 
 </span>
 <span class="date" title="Fri Sep  7 20:08:43 2012">Sep 7, 2012</span>
 <div>
<div class="commentcontent">
<p>yes. one more here, patiently awaiting a "easy mode" addition of the optical flow sensor. Seems a bit odd that there was a fail to mention "not currently supported on our latest hardware release" as one would assume on the product/store page. </p><p>Cables would be a nice addition as well.  Please, someone update the wiki to cover 2.5 hardware... </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Sep  7 21:09:22 2012">Sep 7, 2012</span>
 <div>
<div class="commentcontent">
<p>It's on my list but I haven't got the change completed yet to allow the optical flow to work on the 2.5 yet.  So the code change is definitely not in 2.7.3.  I can't give a precise ETA but i'll aim to get it sorted within a week (so by sep 15th)...the issue may be though that you need to wait until 2.7.4 comes out which could be a few weeks later than that even.  sorry! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Fri Sep 14 05:37:03 2012">Sep 14, 2012</span>
 <div>
<div class="commentcontent">
<p>Ok, I've got the code changes pretty much done to allow the optical flow sensor to work on the APM2.5.  They still need to be reviewed by someone else on the dev team and then they'll go out in a release..2.7.4 might be out very soon but I'm not sure if this will make it into that release or the next one.  If you want to see what I've done you can find it in the rmackay999-wip2 clone in the optflow25 branch.  <a href="http://code.google.com/r/rmackay999-wip2/source/list?name=optflow25" rel="nofollow">http://code.google.com/r/rmackay999-wip2/source/list?name=optflow25</a> </p><p>It's kinda cool actually, the library now auto-detects which of the two SPI buses you've attached the sensor to.  The wiring on the APM2.5 will be a lot easier than on the APM2. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/111242193278268147494/">Azeet.Ma...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Sep 18 15:00:14 2012">Sep 18, 2012</span>
 <div>
<div class="commentcontent">
<p>Question, for the APM 2.5 I see the diagram says to cut the trace between the 5.5V and the center pad but on my board I don't see any join when I look at it with a magnifying glass.  Can someone provide more details on what I should be looking for or details on the procedure? Thanks. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Sep 18 21:22:21 2012">Sep 18, 2012</span>
 <div>
<div class="commentcontent">
<p>@Azeet, </p><blockquote>I'm pretty sure there is a very narrow trace there between the 5v and center pad.  I found it in the eagle diagrams for the 2.5 board and I'm pretty sure I could see it on the board although I believe it was so narrow that I couldn't be completely sure it was there (which is why I checked the eagle files). 
I was thinking maybe you could test with a volt meter but actually..because it's used as the MISO pin it'll be bouncing up and down all the time.  We'd need to write a small special sketch to hold the MISO pin high. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/118166730872426531253/">br...@caseyclan.net</a>,
 
 </span>
 <span class="date" title="Wed Sep 19 22:05:52 2012">Sep 19, 2012</span>
 <div>
<div class="commentcontent">
<p>so... for the 2.5 board, you say "Default mounting is lens pointing down, pins forward", yet in the picture the pins on the sensor are pointing backwards (or at least, opposite of "forward" on the APM) </p><p>Which is the proper orientation? The picture, or the description? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Sep 19 22:45:33 2012">Sep 19, 2012</span>
 <div>
<div class="commentcontent">
<p>@bryan, </p><blockquote>Ah, didn't even think of that when I came up with that picture.  The description is accurate..the picture is done that way just because it was easier to draw it that way..maybe i'll rotate each by 90 degrees...of course by the same logic, the APM1 and APM2 pics were also drawn facing the wrong way. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">luisclem...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Sep 20 04:01:26 2012">Sep 20, 2012</span>
 <div>
<div class="commentcontent">
<p>Any news when we can get optical working with APM 2.5? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/118166730872426531253/">br...@caseyclan.net</a>,
 
 </span>
 <span class="date" title="Fri Sep 21 09:36:35 2012">Sep 21, 2012</span>
 <div>
<div class="commentcontent">
<p>rmackay:  thank you for the clarification! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/118166730872426531253/">br...@caseyclan.net</a>,
 
 </span>
 <span class="date" title="Fri Sep 21 16:33:46 2012">Sep 21, 2012</span>
 <div>
<div class="commentcontent">
<p>luis: the code has been submitted.  rmackay said (above) that it could either be included in this next release or perhaps the one after.   </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">to...@sutromedia.com</span>,
 
 </span>
 <span class="date" title="Thu Sep 27 14:28:55 2012">Sep 27, 2012</span>
 <div>
<div class="commentcontent">
<p>I think I'm very close to getting it working, but I'm having some problems getting the python image grabber to work and would love some hints. </p><p>Here's my situation:  </p><p>- I'm using APM 1 and a Mac  </p><p>- The AP_OpticalFlow_Test<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow_Test">?</a>? program compiles, installs, and shows plausible pixel values using the "I" command, but doesn't show any movement with the "m" command. It just repeats the line -&gt; "x/dx: 0/0	y/dy: 0/0	squal:64"  </p><p>- I can communicate with the APM board using the ImageGrabber<a href="https://code.google.com/p/arducopter/w/edit/ImageGrabber">?</a>? python script, based on what I see in the Arduino interface (it appears to respond in the same way to all the single letter commands), but I'm not seeing any changes in the pixels on the image viewer, even when they are showing in the Arduino interface.  </p><p>- I've double checked all of the wiring and everything appears to be alright. </p><p>Any ideas? </p><p>Thanks! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Sep 27 21:47:57 2012">Sep 27, 2012</span>
 <div>
<div class="commentcontent">
<p>@tobin, </p><blockquote>Sounds like it's working.  The thing is..the flow sensor itself needs to be rebooted after you pull images from it.  So after you use the test program to download an image..you'll need to disconnect and reconnect it's power and then ask it for movement.  It's actually a limitation of the sensor itself.  When it grabs the image it actually uses up a whole bunch of memory that it would otherwise use to calculate the motion..it can't do both without a reset in between. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">to...@sutromedia.com</span>,
 
 </span>
 <span class="date" title="Fri Sep 28 12:13:53 2012">Sep 28, 2012</span>
 <div>
<div class="commentcontent">
<p>Thanks for the tip Randy! That helped me get it working (well, actually, get to the next problem), although it didn't quite work for me as you described. I found that if I entered any commands (in addition to "m") through the Arduino interface that I was unable to view images through the Python image viewer unless I re-installed AP_OpticalFlow_Test<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow_Test">?</a>. Just power cycling the sensor didn't seem to do the trick. But I was able to get the python image view working and get a good focus on the sensor.  </p><p>However, I wasn't able to get the optical flow sensor to actually enable position hold when flying over grass and dirt (with lot of visual texture) in well lit conditions. It appears that the sensor was doing something, as the copter seemed to go from a reasonably stable hover to veering off slowly in one direction when I switched from Stabilize to OF_Loiter. The sensor is mounted next to the sonar sensor with the pins pointing away from me (so pushing the right stick up makes the copter fly further away).  Any tips on how I might go about debugging this? </p><p>Thanks! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/111179216101315290145/">jan.rott...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Oct  2 07:08:06 2012">Oct 2, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, </p><p>Yesterday tested the OF sensor (on APM1, 2.7.3 firmware) by using the CLI and got some data output. However when testing it on the quad it does not seem to hold when switching to OF_LOITER mode. Same behaviour as described above, from stable hover to veering off in one direction. What I also noticed is that when switching on the OF_LOITER mode in the MP it is shown as 'Unknown'. Quite strange though, so I'm not sure if the mode is realy working. There is not much info to be found on the OF sensor either. Any help or hint are welcome :-) </p><p>Thanks </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">ironmad...@gmail.com</span>,
 
 </span>
 <span class="date" title="Tue Oct  2 23:48:03 2012">Oct 2, 2012</span>
 <div>
<div class="commentcontent">
<p>There are already two months that I feel everything to complete the test, but nothing, no information to make it work, no nothing, I am very disappointed, I paid for something that I do not policed ​​provided the software to make it work, why are you doing this ? </p><hr><p>In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:22, </p><blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>E:\Arduino\arduino-1.0\libraries\AP_Common/AP_Common.h:19:20: error: wiring.h: No such file or directory In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:20, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>E:\Arduino\arduino-1.0\libraries\FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>/FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>.h:116: error: conflicting return type specified for 'virtual void FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>::write(uint8_t)' E:\Arduino\arduino-1.0\hardware\arduino\cores\arduino/Print.h:48: error:   overriding 'virtual size_t Print::write(uint8_t)' In file included from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:47: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:48: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:48: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:49: error: use of enum 'Rotation' without previous declaration AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:61: error: use of enum 'Rotation' without previous declaration In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:70, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:80: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:81: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:84: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:85: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:96: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:97: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:97: error: 'byte' has not been declared In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:71, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:81: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:82: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:97: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:98: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:98: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: In member function 'virtual bool AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::init(bool)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:20: error: 'ROTATION_NONE' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: At global scope: AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:27: error: use of enum 'Rotation' without previous declaration AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:40: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:48: error: variable or field 'write_register' declared void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:48: error: 'byte' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:48: error: 'byte' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: In member function 'virtual void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::apply_orientation_matrix()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:60: error: 'class Vector3f' has no member named 'rotate' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: In member function 'virtual void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::update_position(float, float, float, float, float)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:89: error: 'max' was not declared in this scope <p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Oct  3 00:51:36 2012">Oct 3, 2012</span>
 <div>
<div class="commentcontent">
<p>@ironmade07, </p><blockquote>It looks like you have an issue with your arduino IDE not being able to find any of the Arducopter libraries.  My guess is that you don't have your sketchbook location set to the correct place.  Can you try selecting File, Preferences and make sure that the "Sketchbook Location" folder points to the place where you've downloaded the <a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a> libraries to?  So for example, for me, I've got a directory on my machine called C:\Users\rmackay9\Documents\APM and if I look in that directory I find subdirectories called "<a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a>" and "libraries" so I have my sketchbook location set to "C:\Users\rmackay9\Documents\APM". 
</blockquote><p></p><blockquote>By the way, I haven't seen you complaint before, sorry if I missed it. 
</blockquote>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">ironmad...@gmail.com</span>,
 
 </span>
 <span class="date" title="Wed Oct  3 22:36:19 2012">Oct 3, 2012</span>
 <div>
<div class="commentcontent">
<p>thanks for the reply, I have not written before because I broke the horns alone to try to fix it, and now I wanted to throw out the sensor. However, I have done everything right, my sketches are in "C: \ Documents and Settings \ Valter \ My Documents \ Arduino" then "C: \ Documents and Settings \ Valter \ My Documents \ Arduino \ AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test" libraries I tried to put them both folder of the sketch is in "E: \ Arduino \ arduino-1.0 \ libraries" but I always get nothing done. I do not know more what to do :-( (( </p><hr>In file included from E:\Arduino\arduino-1.0\libraries\FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>/BetterStream<a href="https://code.google.com/p/arducopter/w/edit/BetterStream">?</a>.h:16, <blockquote>from E:\Arduino\arduino-1.0\libraries\FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>/FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>.h:56, 
from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:20, 
from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>E:\Arduino\arduino-1.0\libraries\FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>/../AP_Common/AP_Common.h:19:20: error: wiring.h: No such file or directory In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:20, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>E:\Arduino\arduino-1.0\libraries\FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>/FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>.h:119: error: conflicting return type specified for 'virtual void FastSerial<a href="https://code.google.com/p/arducopter/w/edit/FastSerial">?</a>::write(uint8_t)' E:\Arduino\arduino-1.0\hardware\arduino\cores\arduino/Print.h:48: error:   overriding 'virtual size_t Print::write(uint8_t)' In file included from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:47: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:48: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:48: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:49: error: use of enum 'Rotation' without previous declaration AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:61: error: use of enum 'Rotation' without previous declaration In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:70, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:80: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:81: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:84: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:85: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:96: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:97: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.h:97: error: 'byte' has not been declared In file included from /AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:71, <blockquote>from AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:11: 
</blockquote>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:81: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:82: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:97: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:98: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2.h:98: error: 'byte' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: In member function 'virtual bool AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::init(bool)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:20: error: 'ROTATION_NONE' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: At global scope: AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:27: error: use of enum 'Rotation' without previous declaration AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:40: error: 'byte' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:48: error: variable or field 'write_register' declared void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:48: error: 'byte' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:48: error: 'byte' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: In member function 'virtual void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::apply_orientation_matrix()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:60: error: 'class Vector3f' has no member named 'rotate' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp: In member function 'virtual void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::update_position(float, float, float, float, float)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:89: error: 'max' was not declared in this scope <p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100033083209846942899/">salar...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Oct  4 13:46:21 2012">Oct 4, 2012</span>
 <div>
<div class="commentcontent">
<p>Gentlemen, Regarding connecting the sensor to the APM2.5, my APM2.5.1 (9/12/2012) did not have the trace connected between the 5v and the center pad in first place. There are the beginnings of  "trace" between them but they are not connected. It looks like it came already cut-off.  In addition, and just for good measure, I cut between them to insure that there was no trace of any "trace". What is really baffling me is that there still is continuity between the 5v and the center pad regardless. There is .0001 ohms between them. The 3v has no connection to the center pad. I do not want to connect the 3v to the center pad yet if there still is a connection between the 5v and the center pad. Does this make any sense?  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Oct  4 18:05:46 2012">Oct 4, 2012</span>
 <div>
<div class="commentcontent">
<p>@salaraji, </p><blockquote>it must be that that trace is still there.  It is very difficult to see but I believe it's there.  I'm glad you took the extra precaution to check.  I'm slightly unsure how to check that myself with my voltmeter but i think i'd better learn. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">ironmad...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Oct  4 22:37:46 2012">Oct 4, 2012</span>
 <div>
<div class="commentcontent">
<p>OK! I worked with libraries, and I got this: -------------------------------------------------- ------------------------ AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:14:18: error: SPI3.h: No such file or directory AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp: In member function 'virtual bool AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::init(bool, AP_PeriodicProcess<a href="https://code.google.com/p/arducopter/w/edit/PeriodicProcess">?</a><strong>)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:95: error: 'SPI3' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:96: error: 'SPI3_MODE3' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:97: error: 'SPI3_SPEED_2MHZ' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp: In member function 'void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::backup_spi_settings()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:146: error: 'SPI3' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:146: error: 'SPI3_MODE3' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:147: error: 'SPI3_SPEED_2MHZ' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp: In member function 'virtual byte AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::read_register(byte)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:191: error: 'SPI3' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp: In member function 'virtual void AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::write_register(byte, byte)': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:220: error: 'SPI3' was not declared in this scope -------------------------------------------------- ------------------------ now, I downloaded the libraries 2.7.4 beta contains SPI3, but now I get this: Tips? -------------------------------------------------- ---------------------------- </strong></p><p>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::set_orientation(Rotation)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:30: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::set_orientation(Rotation)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:31: first defined here e:/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/bin/ld.exe: Disabling relaxation: it will not work with multiple definitions AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::read_register(unsigned char)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:45: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::read_register(unsigned char)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:61: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::write_register(unsigned char, unsigned char)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:51: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::write_register(unsigned char, unsigned char)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:67: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::update_position(float, float, float, float, float)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:83: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::update_position(float, float, float, float, float)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:99: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::update_conversion_factors()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:73: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::update_conversion_factors()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:89: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::apply_orientation_matrix()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:55: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::apply_orientation_matrix()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp:71: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:51: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>::<i>sensor' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.cpp.o:/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h:56: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:55: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080(int, int)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:42: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:55: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080(int, int)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:42: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::restore_spi_settings()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:118: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::restore_spi_settings()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:154: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_led_always_on()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:243: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_led_always_on()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:282: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_resolution()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:260: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_resolution()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:299: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_frame_rate_auto()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:291: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_frame_rate_auto()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:330: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_shutter_speed_auto()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:371: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_shutter_speed_auto()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:410: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::clear_motion()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:449: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::clear_motion()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:488: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_shutter_speed()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:406: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_shutter_speed()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:445: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_shutter_speed_auto(bool)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:383: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_shutter_speed_auto(bool)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:422: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_frame_period()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:325: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_frame_period()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:364: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_frame_rate()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:356: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::get_frame_rate()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:395: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_frame_rate_auto(bool)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:303: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_frame_rate_auto(bool)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:342: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_frame_period(unsigned int)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:336: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_frame_period(unsigned int)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:375: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_frame_rate(unsigned int)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:361: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_frame_rate(unsigned int)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:400: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_led_always_on(bool)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:250: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_led_always_on(bool)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:289: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::disable_serial_pullup()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:233: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::disable_serial_pullup()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:272: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_shutter_speed(unsigned int)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:418: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::set_shutter_speed(unsigned int)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:457: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::reset()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:193: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::reset()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:234: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::print_pixel_data(Stream<strong>)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:461: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::print_pixel_data(Stream</strong>)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:500: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::backup_spi_settings()': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:102: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::backup_spi_settings()' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:128: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::write_register(unsigned char, unsigned char)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:167: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::write_register(unsigned char, unsigned char)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:207: first defined here AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o: In function `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::read_register(unsigned char)': C:\Documents and Settings\Valter\Documenti\Arduino\libraries\AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:139: multiple definition of `AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080::read_register(unsigned char)' AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp.o:C:\DOCUME~1\Valter\IMPOST~1\Temp\build4157368070343789529.tmp/AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080.cpp:177: first defined here </i></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107772139351248827617/">tom...@gmx.net</a>,
 
 </span>
 <span class="date" title="Wed Oct 10 07:22:32 2012">Oct 10, 2012</span>
 <div>
<div class="commentcontent">
<p>Is there still no schematic/firmware how to connect the optical flow sensor to the APM 2.5? I upgraded from APM2.0 to the new version and hoped everything would be better and even more simple - now I'm stuck with my OF-Sensor </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100033083209846942899/">salar...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Oct 10 19:51:35 2012">Oct 10, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, It would be great if someone would give us a time frame (if any) for the official release of the optical sensor on APM 2.5. Thank you. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Oct 10 20:05:32 2012">Oct 10, 2012</span>
 <div>
<div class="commentcontent">
<p>@tomyb2, the diagram on how to connect the 2.5 is above.  It's much easier than on the 2.0. </p><p>@salaraji, sorry for the delay on 2.7.4.  We're getting close.  Hopefully within a week it'll be out. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107772139351248827617/">tom...@gmx.net</a>,
 
 </span>
 <span class="date" title="Fri Oct 12 00:24:15 2012">Oct 12, 2012</span>
 <div>
<div class="commentcontent">
<p>Huh? I can only see a picture for APM 1 and APM 2.0 above... it does not show me a connenction diagram from APM 2.5... ?? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107772139351248827617/">tom...@gmx.net</a>,
 
 </span>
 <span class="date" title="Fri Oct 12 08:59:26 2012">Oct 12, 2012</span>
 <div>
<div class="commentcontent">
<p>Strange the APM 2.5 schematic right on the top does not show up when using Firefox... even if i reload and overwrite the cache... in IE and on my ipad the picture shows up without any problem =) </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/103085052394919600942/">david.po...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Oct 16 06:19:24 2012">Oct 16, 2012</span>
 <div>
<div class="commentcontent">
<p>we have tested the optical flow sensor with the AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde sketch, and adjusted the lens to be properly focussed using the python program. the image is clear and the x/dx, y/dy values seem ok. using the APM software, we have activated the optflow sensor, and the optflow test seems also ok. </p><p>however, we tested the arducopter outdoor with good light conditions, and we didn't notice any improvement on stability using the arducopter. </p><p>how can we see that the optflow is working properly in arducopter? what should we expect? </p><p>about Optflow sensor, you mention: "To improve position hold accuracy ACM is being enhanced to support an OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a> sensor based on the ADNS3080 mouse sensor.". </p><p>can you please explain a bit more when/how is the opticalflow sensor used? I guess it is used in the Loiter mode. Is it also used in the Stabilized mode? Is it possible to see the image of the OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a> sensor (as in the python prrograme) from the "Mission Panner GCS" software? Is it possible to see the computed "x-y displacement map" from the "Mission Panner GCS" software? Is there a condition in where the OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a> sensor is ignored (such as "if the image is mostly black, then ignore the x-y distance map")? Could the arducopter make a circle of 10m (Loiter mode) with OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a> sensor and without GPS? </p><p>Can you suggest a simple procedure to see that <a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a> is properly using the OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a> sensor? </p><p>Many thanks, David </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Oct 16 20:06:34 2012">Oct 16, 2012</span>
 <div>
<div class="commentcontent">
<p>@david, </p><blockquote>There's a special flight mode called LOITER_OF that you should try.  It will not use the optical flow sensor if the squal (surface quality) is below 20 and also it needs to be below 15meters. 
Before your next flight, could you go into the cli (connect with the arduino ide's serial monitor and press enter 3 times or use the MP's terminal screen) type "logs" and "enable OPTFLOW".  then after your next flight download your logs and PM them to me?  I'm rmackay9 on diydrones. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/103560520597993389691/">Rene.Lan...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Oct 22 01:47:51 2012">Oct 22, 2012</span>
 <div>
<div class="commentcontent">
<p>Hi, I have problems with the APM2.5 and the optFlow 1.0. I can't init the Optflow in the "Mission Planner 1.2 Terminal". It answered "Failed to Init OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a>". The LED lights on the optflow and the PINs are properly connected.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Oct 22 08:30:32 2012">Oct 22, 2012</span>
 <div>
<div class="commentcontent">
<p>@Rene, </p><blockquote>I've tested it pretty thoroughly when i wrote the code a few weeks ago..you're using Arducopter 2.8?  It won't work on anything less on the APM2.5.  By the way, we're pushing out 2.8.1 tomorrow (24th Oct 2012) so I'd recommend waiting for that. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">Wilson....@gmail.com</span>,
 
 </span>
 <span class="date" title="Mon Oct 22 22:59:01 2012">Oct 22, 2012</span>
 <div>
<div class="commentcontent">
<p>Is the wiring connection the same as shown in the pictures when using 2.8.1?  I am using 2 camera servo motors on A10 and A11. Will there be any problems if I change the connections for the optical flow sensor to A8 and A9? Or will it be easier to change the servo motors instead of the optical flow sensor? The servos do not need to be automated. I just need to control them with channel 6 and 7. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Oct 22 23:33:20 2012">Oct 22, 2012</span>
 <div>
<div class="commentcontent">
<p>Wilson, </p><blockquote>The wiring really depends upon which board you're using.  Ah, I see the confusion..the optical flow is connected to the SPI pins which are just forward of the camera servos.  So there's no interference..you can connect both camera servos and the optical flow device. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/116690895225047240615/">st3fano....@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Oct 31 16:47:50 2012">Oct 31, 2012</span>
 <div>
<div class="commentcontent">
<p>someone can confirm is working with 2.8.1 ... i cant ... check everything hundred time .. always get "Failed to Init OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a>" </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104579039798567609628/">jasonan...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Nov 18 18:01:19 2012">Nov 18, 2012</span>
 <div>
<div class="commentcontent">
<p>Can i double check again whether the pin of the optical flow sensor is pointing towards the front direction of the APM or pointing backwards of the APM? Because when the pins are pointing towards the front direction of the APM, the python image shows the image opposite. is this suppose to be the way the optical flow sensor works? </p><p>Why does my dx/x and dy/y values are -values/0 dy/y -values/0 when using the test? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Nov 18 18:53:36 2012">Nov 18, 2012</span>
 <div>
<div class="commentcontent">
<p>Jason, </p><blockquote>yes, the pins point towards the front of the APM.  Yes it may be that the image that gets displayed when you do an image capture is not the same orientation but don't worry about that.  You just need to ensure that you get the focus as sharp as possible. 
the dx/x and dy/y will definitely be zero after you do an image capture because the act of capturing the image overwrites the firmware of the sensor so it can no longer see movement.  This is a feature of the sensor and it's very limited memory.  If you reset the sensor (i.e. disconnect and reconnect power) it should show dx/x and dy/y values.  The meaning of these by the way is...dx = change in x position in the most recent iteration.  x = total x position.  dy = change in y position in the most recent iteration, y = total y position. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">alexwar...@live.com</span>,
 
 </span>
 <span class="date" title="Sun Nov 18 20:00:20 2012">Nov 18, 2012</span>
 <div>
<div class="commentcontent">
<p>Hey, I'm trying to run this on a standard Arduino mega 2560, but I'm having significant trouble. I have line 23 commented out so that the CS pin is its default pin 34, the SPI is connected to the default 50,51,52, but It won't initialise the flow sensor, I always get "Failed to initialise ADNS3080". I'm beginning to wonder if I have a faulty chip? The LED pin also doesn't ever go high. </p><p>On another note, I notice in the datasheet that they say you have to reset the chip after power up in order for it to function properly, but all of the instructions do not connect the reset pin, I would ask if this is maybe the problem, but I imagine no one else has it connected either. </p><p>Appreciate any insight you could give. Alex </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107772139351248827617/">tom...@gmx.net</a>,
 
 </span>
 <span class="date" title="Sun Nov 25 02:36:46 2012">Nov 25, 2012</span>
 <div>
<div class="commentcontent">
<p>Dump question, sorry: Does it matter in which direction the sensor is mounted to the copterframe? Where is front? Where is back? On my copter i unfortunatly can only mount it by some 22,5degree rotated CW - if the mounting diractin matters is there a possibility to compensate for this offset in code? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100445685575365296539/">johnwbak...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Nov 29 16:21:19 2012">Nov 29, 2012</span>
 <div>
<div class="commentcontent">
<p>Pins facing forward tom!! </p><p>Has anyone else run into the error message in python of incomplete lines? i get a picture or two before an error and it shuts down. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">luisclem...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Dec  8 11:40:16 2012">Dec 8, 2012</span>
 <div>
<div class="commentcontent">
<p>Here is a newbie question, do I need to go through all the testing mentioned above for it to work? Installed in a APM 2.5, double checked all wires and opened the bridge and closed the other. Tried using it but seems not to work and the done behaves strangely, had to disable. Running 2.8.1 code. Thanks for any support, Luis.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/107268488950878274646/">guba...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Dec 13 17:32:04 2012">Dec 13, 2012</span>
 <div>
<div class="commentcontent">
<p>I've got an APM 2.5 with the Optical Flow device. I get the same error that everyone with this setup seems to have. If you run the terminal and go into diagnostics mode you will get an error "Failed to Init OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a>".  </p><p>Does anyone have this combo of versions working? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Dec 13 17:48:36 2012">Dec 13, 2012</span>
 <div>
<div class="commentcontent">
<p>Gubalar, </p><blockquote>I've got it working but of course, I'm biased 'cuz i wrote most of the bits involved.  You followed all the instructions above including cutting the solder bridge?  You're using <a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a> 2.8.1? 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/106544189010142739495/">hoev...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Dec 23 05:27:51 2012">Dec 23, 2012</span>
 <div>
<div class="commentcontent">
<p>The instructions indicate you should replace a line in the code for 2.5.1 boards.  If you do it will not compile.  In addition, the code is already there (albeit a little different) and is defaulted to a 2.5.1 board. Please update the instructions. I downloaded the latest ardupilot code v 2.68 </p><p>Error: AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde:-1: error: 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2' does not name a type </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/106544189010142739495/">hoev...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Dec 23 08:09:21 2012">Dec 23, 2012</span>
 <div>
<div class="commentcontent">
<p>Having now run the testing procedures through both the Arduino IDE and using Python, I'd like to make a couple of documentation suggestions around the Python test. </p><blockquote>- Add step 7.5 - Wait for the board to acknowledge as indicated by watching the Python console window. 
- Add an image of the Python console showing the sketch menu. 
- Expand on the concept of 'focusing' the lense.  As grainy as the image is given the resolution, it is every difficult to determine focus.  I decided through experimentation that 'out of focus' was when the image was mostly just gray and had no contrast.  Therefore, the image with the most contrast, must be 'in focus'. 
</blockquote><p></p><blockquote>Can someone explain what may be causing the image capture to hang?  It will capture 1 - N images then stop with the following message: 
</blockquote><p><i>italic_line 11incomplete (19 of 30), ignoring 12,16,8,8,12,12,16,20,28,36,40,60,96,96,76,48,16,8,</i>italic<i> </i></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun Dec 23 08:29:38 2012">Dec 23, 2012</span>
 <div>
<div class="commentcontent">
<p>Hovepj: Thanks for the great suggestions. I can give you wiki edit permissions if you'd like to edit this page and enter those. Please just send me your email address to chris@3drobotics.com, subject line "Wiki edit access" </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/105158171354890714642/">Gregm...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Dec 26 02:29:58 2012">Dec 26, 2012</span>
 <div>
<div class="commentcontent">
<p>I am an Arducopter Newbie, When I go to the CLI and test the optflow, I got values with signal quality above 80, but afer a short time the output hangs (stopped). Is it not possible to exit the test, only reset will help. Any suggestions? I think the same is happening in flight, so the sensor can´t work in flight. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/105158171354890714642/">Gregm...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Dec 26 10:25:32 2012">Dec 26, 2012</span>
 <div>
<div class="commentcontent">
<p>Further tests with the phyton script are OK. No problems with the test sketch. So is there a known issue on 2.81 and optflow? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/110412963917234468350/">gareth.m...@googlemail.com</a>,
 
 </span>
 <span class="date" title="Thu Dec 27 16:18:34 2012">Dec 27, 2012</span>
 <div>
<div class="commentcontent">
<p>Could someone confirm that the wiring diagram for the 2.5 APM above is correct. Unless I am mistaken it has the pins reversed (S+- instead of -+S) so for example the sensor GND goes to an APM signal pin and Sensor CLK is being held HI. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Thu Dec 27 16:26:10 2012">Dec 27, 2012</span>
 <div>
<div class="commentcontent">
<p>Gareth: That's correct. It's a standard ICSP header, like this: <a href="http://www.instructables.com/id/Adding-ICSP-header-to-your-ArduinoAVR-board/step3/ICSP-header-pinout/" rel="nofollow">http://www.instructables.com/id/Adding-ICSP-header-to-your-ArduinoAVR-board/step3/ICSP-header-pinout/</a> </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100033083209846942899/">salar...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Dec 29 10:54:22 2012">Dec 29, 2012</span>
 <div>
<div class="commentcontent">
<p>Has anyone noticed that the Optical Flow Sensor is no longer available at the DYIDRONES Store?  It is no longer being offered as a product. Does this mean it is being scrapped? I need to purchase a second one but they are not offered anymore. Does someone know what is happening with this product?  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Dec 29 11:18:17 2012">Dec 29, 2012</span>
 <div>
<div class="commentcontent">
<p>One component is no longer available, so we're redesigning it with a new component. It should be back in stock in a few weeks.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">Samoh...@gmail.com</span>,
 
 </span>
 <span class="date" title="Mon Dec 31 11:22:02 2012">Dec 31, 2012</span>
 <div>
<div class="commentcontent">
<p>Mission Planner still shows the vehicle state as "UNKNOWN" when the vehicle is in Optical Flow Loiter. Do we have any idea when integration will be finished? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Dec 31 21:29:20 2012">Dec 31, 2012</span>
 <div>
<div class="commentcontent">
<p>@Samoht70, </p><blockquote>Thanks for the report.  The issue must be that the mission planner doesn't have the string "OF_LOITER" associated with that flight mode (#10).  I've ping'd a note to Michael O who does the vast majority of the dev on the mission planner 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100291766531852044776/">pyros...@yahoo.com</a>,
 
 </span>
 <span class="date" title="Sat Jan 19 15:54:18 2013">Jan 19, 2013</span>
 <div>
<div class="commentcontent">
<p>hi there folks, </p><p>ive been working really hard to get my hexa up and running, i have managed to figure everything out with my ultra limitied arduino experiance, in fact this is my first go with anything arduino related. </p><p>my final problem is getting anywhere with this optical flow sensor. i installed it correctly, cut the trace, soldered the power bridge etc.... but when i try to upload the test sketch in arduino 1.0.3, i get a bunch of errors.    </p><p>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:15: error: 'AP_HAL' has not been declared AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:15: error: expected initializer before '&amp;' token AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:17: error: 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080' does not name a type AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void setup()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:21: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:26: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:30: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:30: error: 'AP_OPTICALFLOW_ADNS3080_PINS_FORWARD' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:31: error: 'AP_OPTICALFLOW_ADNS3080_08_FOV' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void display_menu()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:41: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void display_config()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:60: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:61: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:61: error: 'ADNS3080_CONFIGURATION_BITS' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:64: error: 'ADNS3080_EXTENDED_CONFIG' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:70: error: 'ADNS3080_PRODUCT_ID' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void set_frame_rate()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:109: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:110: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void display_image()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:161: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:162: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void display_image_continuously()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:170: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void set_resolution()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:192: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:193: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:210: error: 'ADNS3080_RESOLUTION_1600' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:213: error: 'ADNS3080_RESOLUTION_400' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void set_shutter_speed()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:228: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:229: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void display_motion()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:298: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:303: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: In function 'void loop()': AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:339: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:344: error: 'hal' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:385: error: 'flowSensor' was not declared in this scope AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde: At global scope: AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:395: error: expected constructor, destructor, or type conversion before ';' token </p><p>im sorry guys im sure there must be something simple im not doing, im just really really lost. many thanks, i really appreciated it, </p><p>Regards </p><p>Sam </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Jan 19 16:04:08 2013">Jan 19, 2013</span>
 <div>
<div class="commentcontent">
<p>pyrosamz: the newest code requires a modified Arduino IDE, which you can find here: <a href="https://code.google.com/p/ardupilot-mega/downloads/list" rel="nofollow">https://code.google.com/p/ardupilot-mega/downloads/list</a> </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100291766531852044776/">pyros...@yahoo.com</a>,
 
 </span>
 <span class="date" title="Sat Jan 19 16:09:51 2013">Jan 19, 2013</span>
 <div>
<div class="commentcontent">
<p>thanks analogue, ill give that a whirl. regards! :) </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100291766531852044776/">pyros...@yahoo.com</a>,
 
 </span>
 <span class="date" title="Sat Jan 19 16:39:10 2013">Jan 19, 2013</span>
 <div>
<div class="commentcontent">
<p>analogue, im still getting the same errors. i selected the right board APM 2.x.. is there anything else i might not have right? cheers </p><p>. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/105910977869522122580/">analogue...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat Jan 19 17:23:39 2013">Jan 19, 2013</span>
 <div>
<div class="commentcontent">
<p>Have you just loaded the regular <a href="https://code.google.com/p/arducopter/wiki/ArduCopter">ArduCopter</a> 2.9 firmware and enabled the Optical Flow from that? You shouldn't have to mess with Arduino at all.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100291766531852044776/">pyros...@yahoo.com</a>,
 
 </span>
 <span class="date" title="Sat Jan 19 21:38:09 2013">Jan 19, 2013</span>
 <div>
<div class="commentcontent">
<p>acutally im still on 2.8.1 just updating now. how about the business of focusing the optical flow sensor? do i still have to download python and do a capture? regards! </p><p>S. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/112692018736364290492/">gertfou...@gfworx.co.za</a>,
 
 </span>
 <span class="date" title="Thu Jan 31 06:27:46 2013">Jan 31, 2013</span>
 <div>
<div class="commentcontent">
<p>Good day to you </p><p>I got a APM2.0 a few months ago and a Optical Flow sensor soon after. Never got it to work well. I'm getting a APM2.5 an a few days time :)) and will be going through the process again.  </p><p>My question </p><p>Up to how many M will it be affective in holding position?  I noticed in the sketch above 2M?  Would I have to get a sonar as well for higher position /  alt hold?  Let's say 20M +?   </p><p>I am a bit confused but know that all the sensors work together, including GPS, to keep altitude hold and position hold.  </p><p>Well done on a GREAT all round site and products. It is incredible how much can be done with such a small form factor board.  </p><p>Thank you </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Feb  6 00:44:31 2013">Feb 6, 2013</span>
 <div>
<div class="commentcontent">
<p>@Gert, </p><blockquote>The optflow sensor is only used for the OF_LOITER flight mode.  I can get mine to hold within a couple of meters although it tends to drift off a bit.  The problem is that we don't use it as well in the arducopter code as we should.  For best results the speed from the optical flow should be merged with the position from the gps and the accelerations from the accelerometers.  This is what I'm hoping to add in 2.9.3 (we're at 2.9.1 at the moment). 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/108161097420493816065/">gadg...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Feb 18 12:27:32 2013">Feb 18, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi, I've got an APM2.5 running arducopter 2.9.1. I was looking to add the flow sensor, so I made the 5v/3.3v change with the solder pads (very carefully, with a scalpel). Although now the telemetry is showing the battery level as varying between 0.25v &amp; 1.8v, which means the controller won't arm ready for flight. The sensor isn't actually connected at the moment and I've reset the pads to 5v with the same result. Anyone else seen this? Thanks. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">stevenc...@live.com.sg</span>,
 
 </span>
 <span class="date" title="Sat Feb 23 21:03:06 2013">Feb 23, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi there, i have been having this problem for the past 2 months, The optical flow will hang half way. i have follow the instruction closely but still having this problem. In the terminal, it will just hang there. </p><p>sent 'I' to COM4 line 17incomplete (10 of 30), ignoring 12,12,16,16,20,16,12,8,8, </p><p>Have anyone encounter this ? and have solution to this ? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104408487566466079249/">jpbarnet...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Feb 27 07:22:08 2013">Feb 27, 2013</span>
 <div>
<div class="commentcontent">
<p>On the diagram for connecting to APM2.5 the SCLK wire on the APM2.5 board is shown as connecting to the SCLK pin, but also crosses the RST pin.  Might be a stupid question, but is there supposed to be a connection bewtween SCLK &amp; RST pins on the APM2.5 board? Or should it be shown like the connection at A3 and indicate a connection only to the SCLK pin?  Cheers. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Mar  2 04:53:44 2013">Mar 2, 2013</span>
 <div>
<div class="commentcontent">
<p>Hey guys, I'm having similar issues. I've got APM2.5 running Arducopter 2.9.1 on a 3DR Hexacopter. The OptiFlow<a href="https://code.google.com/p/arducopter/w/edit/OptiFlow">?</a> sensor I have is from JDrones and its Optiflow v1.1. This seems to have a slightly different pin configuration from the diagram above. But it seems to power up if I have the following pin config: (I've done the 3.3v pad solder and cut the 5v trace) </p><p>optiflow           APM </p><p>3V                 n/c GND                -ve pin of SPI  5V                 Signal pin of SPI NCS                Signal Pin of A3  MISO               -ve pin of A11 MOSI               +ve pin of SPI SCLK               +ve &amp; Signal pins of A11 (have tried only +ve pin, only Signal and both together) </p><p>So in the above config the APM boots and connects to Mission Planner and the led on the optiflow lights up, however the flight data from the apm goes haywire, as if the copter were flying barrel rolls, over and over again. </p><p>Any ideas folks? Any advice, seriously appreciated! Cheers guys. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Mar  2 05:00:50 2013">Mar 2, 2013</span>
 <div>
<div class="commentcontent">
<p>ah, I see the little table for pin connections in the post above doesn't hold formatting when submitted...try again;  </p><p>Optiflow 3V to APM n/c  Optiflow GND to APM -ve pin of SPI  Optiflow 5V to Signal pin of SPI  Optiflow NCS to Signal Pin of A3  Optiflow MISO to -ve pin of A11 M Optiflow OSI to  +ve pin of SPI  Optiflow SCLK to +ve &amp; Signal pins of A11 (have tried only +ve pin, only Signal and both together) </p><p>cheers again for any help guys. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Mar  2 05:02:22 2013">Mar 2, 2013</span>
 <div>
<div class="commentcontent">
<p>dagnamit!! one more time, just to eliminate ambiguity. </p><p>Optiflow 3V to APM n/c  </p><p>Optiflow GND to APM -ve pin of SPI  </p><p>Optiflow 5V to Signal pin of SPI  </p><p>Optiflow NCS to Signal Pin of A3  </p><p>Optiflow MISO to -ve pin of A11  </p><p>Optiflow MOSI to +ve pin of SPI  </p><p>Optiflow SCLK to +ve &amp; Signal pins of A11 (have tried only +ve pin, only Signal and both together) </p><p>fingers crossed this time! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104151241084970902694/">izap...@gmx.net</a>,
 
 </span>
 <span class="date" title="Sat Mar  2 14:37:56 2013">Mar 2, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi all there. I have a APM2.5 no other shield into an optical flow module  jD-OptiFlow<a href="https://code.google.com/p/arducopter/w/edit/OptiFlow">?</a> v1.1. Can someone post here or in wiki some pictures how to connect these three pins called: MOSI, MISO and SCLK ?   I don't know, where to connect them onto the APM2.5 board. I think there is a solution, or do they just still work around this ?? Great thanks </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104151241084970902694/">izap...@gmx.net</a>,
 
 </span>
 <span class="date" title="Mon Mar  4 12:06:29 2013">Mar 4, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi, i try to compile the AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test.pde in Arduino 1.0.3, but only get much of errors like:  'AP_HAL' has not been declared and highlighted line: const AP_HAL::HAL&amp; hal = AP_HAL_BOARD_DRIVER; </p><p>I think i have a problem with libraries, can someone explain, where to put this sample.pde into or how must the directory of arduino look like, to compile right without error and upload to APM2.5.  Thanks a lot. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Mon Mar  4 14:40:20 2013">Mar 4, 2013</span>
 <div>
<div class="commentcontent">
<p>I should maybe add, that the confusion for me originally came from the differences between the optiflow sensor v1 shown above and the v1.1 version now for sale. In v1.1 the 3v pin is where GND is on v1; so do I connect following the visual representation of the pins (ie, the topmost pin, as shown, connects to SPI signal pin), or do I connect following the the names of the necessary pins (ie. GND goes to SPI signal pin). </p><p>And, if I have already got it wired correctly (see post on March 2nd), why is the APM going haywire when the optiflow is connected. Sorry for being yet another resource hog guys. </p><p>Cheers, John  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Mon Mar  4 14:58:15 2013">Mar 4, 2013</span>
 <div>
<div class="commentcontent">
<p>Hey izap, I feel your pain. I've done a bit of work with Arduino programming, I'll try to download all the arduino test programs for the optiflow and see if I can spot the issue you're having. </p><p>Regarding your pins connection post a couple of days ago, try following the connections I listed; they seem to work but send the flight data nuts...I think this was an issue some folks had last year also, but I can't spot a solution....unless I've just wired it wrongly! </p><p>John </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Mar  4 18:13:18 2013">Mar 4, 2013</span>
 <div>
<div class="commentcontent">
<p>@John, </p><blockquote>Really!?!  the pins position changed on the 3dr optical flow sensor?  If that's true, then I think you should follow the naming of the pins not the position. 
I've only seen the roll, pitch, etc go crazy when the optical flow is interfering with the MPU6k which can happen if the MISOLVL jumper hasn't been done correctly.  Maybe there's still a trace in there between the 5V and the center pad? 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon Mar  4 18:39:23 2013">Mar 4, 2013</span>
 <div>
<div class="commentcontent">
<p>@izapper, </p><blockquote>My guess is that you don't have the board type selected properly in your Arduino IDE.  Can you check out the bottom of this page for how to do this for our modified version of the Arduino 1.0.3 IDE?  <a href="http://code.google.com/p/arducopter/wiki/ProgrammingSettingUp" rel="nofollow">http://code.google.com/p/arducopter/wiki/ProgrammingSettingUp</a> 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Tue Mar  5 03:35:13 2013">Mar 5, 2013</span>
 <div>
<div class="commentcontent">
<p>Cheers for the info rmackay, can you tell me which of the power pins on the optiflow do I want to supply power to, the 3v or 5v? I'm guessing the 3v, given all the discussion re cutting the 5v trace? </p><p>In order to confirm the trace is cut properly, which of the SPI pins on the APM should be outputting 3v? I'll measure and confirm I've properly cut that trace.  </p><p>Thanks again, all info really appreciated! John </p><p>PS. when I get back home I'll take a photo of the pin arrangement on the optiflow v1.1 </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">john.liv...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Mar  7 11:25:19 2013">Mar 7, 2013</span>
 <div>
<div class="commentcontent">
<p>As promised; here's the pics of the optiflow sensor pins. Though I see now it has Jdrones written on it. Is that different from the 3dr one? </p><p><a href="http://youtu.be/QF9WJclD5HM" rel="nofollow">http://youtu.be/QF9WJclD5HM</a> </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104151241084970902694/">izap...@gmx.net</a>,
 
 </span>
 <span class="date" title="Sat Mar 16 04:01:33 2013">Mar 16, 2013</span>
 <div>
<div class="commentcontent">
<p>I got the same error when compiling the testprogram of the ADNS3080 sensor, i changed the line with the declaration as written: </p><p>/<strong> </strong></p><ul><li><strong> Example of AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a> library. </strong></li><li><strong> Code by Randy Mackay. DIYDrones.com </strong></li><li><strong> </strong></li></ul><p></p><p>#include &lt;AP_Common.h&gt; #include &lt;AP_Progmem.h&gt; #include &lt;AP_Param.h&gt; #include &lt;AP_Math.h&gt; #include &lt;AP_HAL.h&gt; #include &lt;AP_HAL_AVR.h&gt; </p><p>#include &lt;AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>.h&gt; </p><p>const AP_HAL::HAL&amp; hal = AP_HAL_BOARD_DRIVER; </p><p>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2 flowSensor(A3); </p><p>//////// i have the APM 2.5  this should be correct, or ? In Arduino IDE settings i have: board: 25060 or Mega ADK,  and Serial Com4 via USB-cable. IDE version 1.0.3. Don't know why this compile error is shown. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104151241084970902694/">izap...@gmx.net</a>,
 
 </span>
 <span class="date" title="Sat Mar 16 04:08:00 2013">Mar 16, 2013</span>
 <div>
<div class="commentcontent">
<p>const AP_HAL::HAL&amp; hal = AP_HAL_BOARD_DRIVER; in red:  'AP_HAL' has not been declared </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104151241084970902694/">izap...@gmx.net</a>,
 
 </span>
 <span class="date" title="Sat Mar 16 06:04:28 2013">Mar 16, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi all, ok now i got it! i installed again all the software and had a newer version of APM2.5 optical flow test, that works well ! Now the flowsensor puts out data via mission planner - great ! I m now testing the ImageGrabber<a href="https://code.google.com/p/arducopter/w/edit/ImageGrabber">?</a> with python-shell:  i startet with run, after shell i running well, i opened my COM31 port and pressed once the Send-Button, but the image does not change, but why ? there are much of cryptical lines in the shell updated every seconds like this here: þ	ë     dont know if this is really right or only a viewing problem, but no image-pixel is changing, who knows what to do ?   thanks to all here ! </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/100915647538915463866/">BlackM...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Mar 20 14:52:51 2013">Mar 20, 2013</span>
 <div>
<div class="commentcontent">
<p>I Also have Problems with the actual reposity: </p><p>AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_test:18: error: 'AP_OpticalFlow<a href="https://code.google.com/p/arducopter/w/edit/OpticalFlow">?</a>_ADNS3080_APM2' does not name a type </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/101879428010948544143/">johnmem...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed Mar 27 01:00:07 2013">Mar 27, 2013</span>
 <div>
<div class="commentcontent">
<p>Good morning. Ive been experimenting on this optical flow for about 2 months now without much positive results. Im using both APM1 and 2.5 currently im at Ardupilot2.5. Im a newbie at this arduino flatform . I cant run the test codes which gave me the same errors as the above. The Python is working but it did not change images. Just to clear, this procedure is just to test the optical flow hardware is working...right?..and i will not use the test code to fly and implement the OP_LOITER in flight but rather use the 2.9.1 firmware?...I tested it on the APM planner on the terminal and its giving me good numbers but it stops at around 20secs. Will it do the same when flying? I tested it indoor with the checkered black and white images on the floor with a lot of sunlight the position hold was more precised than the stabilize mode but still it strays away and the bad thing was while hovering on its own it did some abrupt yaw (about 5deg)and some abrupt maneuvers. I just crashed a while ago while it was hovering at OP_LOITER and it just went on its own way on a split sec. I have been experiencing that things over and over. What could i have done wrong here? Can someone give me a step by step procedure on doing this?   </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/104151241084970902694/">izap...@gmx.net</a>,
 
 </span>
 <span class="date" title="Tue Apr  2 00:04:26 2013">Apr 2, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi BlackM, </p><p>i solved this compiling problem by taking another download/version of this arduino test program. I dont know exactly which other newest version i took, but i remember that i had a program with much more remarks in it and the line number, which have to be changed, then was correct. No compiling error will come than. Try to look into these textfiles from different downloads, they are little different. Why there is no moving of pixels in ImageGrabber<a href="https://code.google.com/p/arducopter/w/edit/ImageGrabber">?</a> by testing this python-shell-application, i don't know. Let's try to solve this together. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/112873043079217722713/">duvert.f...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Apr 16 14:29:47 2013">Apr 16, 2013</span>
 <div>
<div class="commentcontent">
<p>Hello Can someone tell me if we can plug and how this hardware PX4Flow Smart Camera, because i can't find the original Optical Flow Sensor is backordered </p><p>Thanks for all </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">joseluis...@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Apr 18 09:33:03 2013">Apr 18, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi All...  I am new in this forum...I need help...I purchase a APM 2.5 and OF module... but now.... I do not know connect. The links for how connect the OF in APM 2.5 not run correctly...please can someone publish the new link or schematic... Thanks.. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">matthew....@gmail.com</span>,
 
 </span>
 <span class="date" title="Thu Apr 18 22:03:48 2013">Apr 18, 2013</span>
 <div>
<div class="commentcontent">
<p>Just curious, does anyone have the jDrones OptFlow<a href="https://code.google.com/p/arducopter/w/edit/OptFlow">?</a> sensor working with the APM 2.5? I mean fully working? I have the sensor, but I don't want to cut/solder my board if it doesn't even work properly. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">joseluis...@gmail.com</span>,
 
 </span>
 <span class="date" title="Fri Apr 19 07:55:56 2013">Apr 19, 2013</span>
 <div>
<div class="commentcontent">
<p>Yes, yes..it is curious ... Matthew...You already have it connected to the board???... </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">matthew....@gmail.com</span>,
 
 </span>
 <span class="date" title="Fri Apr 19 12:44:05 2013">Apr 19, 2013</span>
 <div>
<div class="commentcontent">
<p>Not yet. I'm waiting to until I find someone that says it works first. I mean, cutting the lead and adding the new connection doesn't look THAT hard... But I'd rather not do it if no one has it working correctly. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">joseluis...@gmail.com</span>,
 
 </span>
 <span class="date" title="Fri Apr 19 22:26:25 2013">Apr 19, 2013</span>
 <div>
<div class="commentcontent">
<p>Thank for response.....but, the connect schematic? you have it? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102460849128326531388/">cr...@3drobotics.com</a>,
 
 </span>
 <span class="date" title="Sat Apr 20 11:28:29 2013">Apr 20, 2013</span>
 <div>
<div class="commentcontent">
<p>@matthew it works for loiter </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">matthew....@gmail.com</span>,
 
 </span>
 <span class="date" title="Sat Apr 20 21:22:47 2013">Apr 20, 2013</span>
 <div>
<div class="commentcontent">
<p>@Craig: you rock. @Jose: It looks like it hooks up the same way as the 3DR version, but the pins are in different places. Shouldn't be a problem, however, as all the pins are clearly labeled.  </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/101332846659041878482/">thumt...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sat May 11 09:31:16 2013">May 11, 2013</span>
 <div>
<div class="commentcontent">
<p>After I ran serial monitor, the program shown  </p><p>" Failed to initialise ADNS3080 " </p><p>Is my optical flow dead? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/111555198929786363306/">wkburk...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun May 12 04:08:15 2013">May 12, 2013</span>
 <div>
<div class="commentcontent">
<p>I also have the new one, jdrones v1.1, not hooked up yet because I would like to read about it.  The pins are in a different order which should not matter, just match the signals. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/111555198929786363306/">wkburk...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun May 12 04:18:00 2013">May 12, 2013</span>
 <div>
<div class="commentcontent">
<p>If we cut and resolder the MISOLVL jumper on the back of the APM 2.5 board to switch the MISO pin to work on 3.3v then why is the red wire going to 5v?  Should red to the 3v input on the OF? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Mon May 13 20:21:22 2013">May 13, 2013</span>
 <div>
<div class="commentcontent">
<p>@wkburkert, </p><blockquote>No because changing the MISOLVL jumper is only changing the voltage of the master-in-slave-out connection between the optical flow sensor and the main cpu.  It's not changing the voltage of the power line going into the sensor. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">wburk...@stratasolar.com</span>,
 
 </span>
 <span class="date" title="Wed May 15 19:35:43 2013">May 15, 2013</span>
 <div>
<div class="commentcontent">
<p>@mackay </p><p>Thank-you, got it.  Do you suspect matching the signal names is a safe way to connect the new v1.1? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/102217401446260941157/">rmackay...@gmail.com</a>,
 
 </span>
 <span class="date" title="Wed May 15 20:39:11 2013">May 15, 2013</span>
 <div>
<div class="commentcontent">
<p>@wkburkert, </p><blockquote>Yes, i think matching the pins up by name is a good way to wire it up. 
</blockquote><p></p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/111555198929786363306/">wkburk...@gmail.com</a>,
 
 </span>
 <span class="date" title="Sun May 19 00:57:45 2013">May 19, 2013</span>
 <div>
<div class="commentcontent">
<p>I carefully matched the signal names on the OF to the APM 2.5 drawing above.  When I attach the USB to the APM the OF Sensor lights GREEN LED.  It shows ENABLED in Terminal mode but never any values when TESTING.  Does anyone have jdrones v1.1 Optical Flow working a APM 2.5? </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 <a class="userlink" href="https://code.google.com/u/117778927428640485452/">kangle...@126.com</a>,
 
 </span>
 <span class="date" title="Mon Jul 15 00:22:53 2013">Jul 15, 2013</span>
 <div>
<div class="commentcontent">
<p>hello, I am a chinese student,I'm interested in the optical flow algorithm，but the principle you mentioned is so brief，I can't understand the formula mentioned in it,so I hope you can send me a more detailed documentation for study.Thank you! this is my email: kanglei79@126.com </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by 
 
 

 
 <span class="userlink">jaybi...@gmail.com</span>,
 
 </span>
 <span class="date" title="Tue Jul 16 23:11:33 2013">Jul 16, 2013</span>
 <div>
<div class="commentcontent">
<p>Hi, I'm trying to download the AP Optical Flow pde file but link appears to be broken. Should this get fixed? Is there somewhere else to download it? I've tried to find it on the downloads section of this website but can't find it. I've also had a look on the ardupilot website downloads page, and it doesn't seem to be there. </p>
</div>
 
 
 </div>
 </div>
 

 
 <div class="artifactcomment">
 
 
 
 
 
 
 <span class="author">Comment
 
 by  project member 
 
 

 <a class="userlink" href="https://code.google.com/u/112590010909510206219/">billbon...@gmail.com</a>,
 
 </span>
 <span class="date" title="Tue Jul 16 23:30:41 2013">Jul 16, 2013</span>
 <div>
<div class="commentcontent">
<p>Try here <a href="https://github.com/diydrones/ardupilot/tree/master/libraries/AP_OpticalFlow/examples" rel="nofollow">https://github.com/diydrones/ardupilot/tree/master/libraries/AP_OpticalFlow/examples</a> </p><p>The new manuals are at copter.ardupilot.com </p>
</div>
 
 
 </div>
 </div>
 

</div>
</div>

 


 <script type="text/javascript">
 function delComment(sequence_num, create_time, delete_mode) {
 var f = document.forms["delcom"];
 f.sequence_num.value = sequence_num;
 f.create_time.value = create_time;
 f.mode.value = delete_mode;
 f.submit();
 return false;
 }
 </script>


 </div>
 
 
 
 
 <br>
 <div class="artifactcomment">
 <span class="indicator">►</span> <a href="https://www.google.com/accounts/ServiceLogin?service=code&ltmpl=phosting&continue=https%3A%2F%2Fcode.google.com%2Fp%2Farducopter%2Fwiki%2FAC2_OptFlow&followup=https%3A%2F%2Fcode.google.com%2Fp%2Farducopter%2Fwiki%2FAC2_OptFlow">Sign in</a> to add a comment
 </div>
 
 
 
 
 <form name="delcom" action="https://code.google.com/p/arducopter/w/delComment.do" method="POST">
 <input type="hidden" name="sequence_num" value="">
 <input type="hidden" name="create_time" value="">
 <input type="hidden" name="mode" value="">
 <input type="hidden" name="pagename" value="AC2_OptFlow">
 <input type="hidden" name="token" value="">
 </form>


 <script src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/prettify.js"></script>
 <script type="text/javascript">
 prettyPrint();
 </script>

<script type="text/javascript" src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/dit_scripts.js"></script>



  
 
 
 <script type="text/javascript" src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/ph_core.js"></script>
 
 <script type="text/javascript" src="./AC2_OptFlow - arducopter - Arduino-based autopilot for mulirotor craft, from quadcopters to traditional helis - Google Project Hosting_files/ph_dwiki.js"></script>
 
 
 
 
</div> 

<div id="footer" dir="ltr">
 <div class="text">
 <a href="https://code.google.com/projecthosting/terms.html">Terms</a> -
 <a href="http://www.google.com/privacy.html">Privacy</a> -
 <a href="https://code.google.com/p/support/">Project Hosting Help</a>
 </div>
</div>
 <div class="hostedBy" style="margin-top: -20px;">
 <span style="vertical-align: top;">Powered by <a href="http://code.google.com/projecthosting/">Google Project Hosting</a></span>
 </div>

 
 


 
 



<div class="menuDiv instance0" id="menuDiv-projects-dropdown" style="position: absolute; top: 19px; left: 1429px; display: none;"><div class="menuCategory default" style="display: none;"></div><div class="menuCategory controls first"><a class="menuItem" href="http://www.google.com/accounts/ServiceLogin?service=code&ltmpl=phosting&continue=https%3A%2F%2Fcode.google.com%2Fp%2Farducopter%2Fwiki%2FAC2_OptFlow&amp;followup=https%3A%2F%2Fcode.google.com%2Fp%2Farducopter%2Fwiki%2FAC2_OptFlow" style="display: block;">Sign in to see your favorites</a><hr class="menuSeparator"><a class="menuItem" href="https://code.google.com/hosting/" style="display: block;">Find open source projects...</a><a class="menuItem" href="https://code.google.com/hosting/createProject" style="display: block;">Create a project...</a></div></div></body></html>